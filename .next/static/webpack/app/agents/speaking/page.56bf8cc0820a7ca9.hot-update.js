"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/agents/speaking/page",{

/***/ "(app-pages-browser)/./src/services/supabaseService.ts":
/*!*****************************************!*\
  !*** ./src/services/supabaseService.ts ***!
  \*****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabaseService: () => (/* binding */ supabaseService)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(app-pages-browser)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nif (false) {}\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://hpalsfsnabqscgzyjuzo.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhwYWxzZnNuYWJxc2NnenlqdXpvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjcyMzc4NDYsImV4cCI6MjA0MjgxMzg0Nn0.6v45IUdEyHdVNQCW7LNrDXFUsD70YH5j1NZ6xyTEMvo\");\nclass SupabaseService {\n    async getTemplates(type) {\n        try {\n            let query = supabase.from(this.TEMPLATES_TABLE).select(\"\\n          *,\\n          questions:\".concat(this.TEMPLATE_QUESTIONS_TABLE, \"(id, question, type),\\n          topics:\").concat(this.TEMPLATE_TOPICS_TABLE, \"(id, topic),\\n          vocabulary:\").concat(this.TEMPLATE_VOCABULARY_TABLE, \"(id, word, meaning, example)\\n        \"));\n            if (type) {\n                query = query.eq('type', type);\n            }\n            const { data, error } = await query.order('created_at', {\n                ascending: false\n            });\n            if (error) throw error;\n            return data || [];\n        } catch (error) {\n            console.error('Error fetching templates:', error);\n            throw error;\n        }\n    }\n    async createSession(session) {\n        try {\n            // First check if template exists\n            const { data: template, error: templateError } = await supabase.from(this.TEMPLATES_TABLE).select('id').eq('id', session.template_id).single();\n            if (templateError || !template) {\n                throw new Error('Template not found');\n            }\n            // Create session with proper UUID for user_id\n            const { data, error } = await supabase.from(this.SESSIONS_TABLE).insert({\n                user_id: session.user_id,\n                template_id: session.template_id,\n                duration: session.duration,\n                start_time: new Date().toISOString(),\n                metrics: {\n                    fluency: 0,\n                    lexical: 0,\n                    grammar: 0,\n                    pronunciation: 0\n                }\n            }).select('*').single();\n            if (error) {\n                console.error('Supabase error:', error);\n                throw error;\n            }\n            if (!data) {\n                throw new Error('No data returned from session creation');\n            }\n            return data;\n        } catch (error) {\n            console.error('Error creating session:', error);\n            throw error;\n        }\n    }\n    async endSession(session_id) {\n        try {\n            const { error } = await supabase.from(this.SESSIONS_TABLE).update({\n                end_time: new Date().toISOString()\n            }).eq('id', session_id);\n            if (error) throw error;\n        } catch (error) {\n            console.error('Error ending session:', error);\n            throw error;\n        }\n    }\n    async createMessage(message) {\n        try {\n            const { data, error } = await supabase.from(this.MESSAGES_TABLE).insert({\n                session_id: message.session_id,\n                role: message.role,\n                content: message.content,\n                audio_url: message.audio_url,\n                created_at: new Date().toISOString()\n            }).select().single();\n            if (error) throw error;\n            return data;\n        } catch (error) {\n            console.error('Error creating message:', error);\n            throw error;\n        }\n    }\n    async createFeedback(feedback) {\n        try {\n            const { data, error } = await supabase.from(this.FEEDBACK_TABLE).insert({\n                session_id: feedback.session_id,\n                content: feedback.content,\n                metrics: feedback.metrics,\n                created_at: new Date().toISOString()\n            }).select().single();\n            if (error) throw error;\n            return data;\n        } catch (error) {\n            console.error('Error creating feedback:', error);\n            throw error;\n        }\n    }\n    async uploadAudio(file, session_id) {\n        try {\n            const filename = \"\".concat(session_id, \"/\").concat(Date.now(), \".webm\");\n            const { data, error } = await supabase.storage.from(this.RECORDINGS_BUCKET).upload(filename, file);\n            if (error) throw error;\n            const { data: urlData } = supabase.storage.from(this.RECORDINGS_BUCKET).getPublicUrl(filename);\n            // Record the audio file in the recordings table\n            const { error: recordError } = await supabase.from(this.RECORDINGS_TABLE).insert({\n                session_id,\n                file_path: filename,\n                public_url: urlData.publicUrl,\n                created_at: new Date().toISOString()\n            });\n            if (recordError) throw recordError;\n            return urlData.publicUrl;\n        } catch (error) {\n            console.error('Error uploading audio:', error);\n            throw error;\n        }\n    }\n    async updateSessionMetrics(session_id, metrics) {\n        try {\n            const { error } = await supabase.from(this.SESSIONS_TABLE).update({\n                metrics\n            }).eq('id', session_id);\n            if (error) throw error;\n            // Also record in the metrics table for historical tracking\n            const { error: metricsError } = await supabase.from(this.METRICS_TABLE).insert({\n                session_id,\n                metrics,\n                created_at: new Date().toISOString()\n            });\n            if (metricsError) throw metricsError;\n        } catch (error) {\n            console.error('Error updating session metrics:', error);\n            throw error;\n        }\n    }\n    async getSessionMessages(session_id) {\n        try {\n            const { data, error } = await supabase.from(this.MESSAGES_TABLE).select('*').eq('session_id', session_id).order('created_at', {\n                ascending: true\n            });\n            if (error) throw error;\n            return data || [];\n        } catch (error) {\n            console.error('Error fetching session messages:', error);\n            throw error;\n        }\n    }\n    async getSessionFeedback(session_id) {\n        try {\n            const { data, error } = await supabase.from(this.FEEDBACK_TABLE).select('*').eq('session_id', session_id).order('created_at', {\n                ascending: true\n            });\n            if (error) throw error;\n            return data || [];\n        } catch (error) {\n            console.error('Error fetching session feedback:', error);\n            throw error;\n        }\n    }\n    async getSessionRecordings(session_id) {\n        try {\n            const { data, error } = await supabase.from(this.RECORDINGS_TABLE).select('public_url').eq('session_id', session_id).order('created_at', {\n                ascending: true\n            });\n            if (error) throw error;\n            return (data === null || data === void 0 ? void 0 : data.map((r)=>r.public_url)) || [];\n        } catch (error) {\n            console.error('Error fetching session recordings:', error);\n            throw error;\n        }\n    }\n    constructor(){\n        this.TEMPLATES_TABLE = 'ailts_templates';\n        this.SESSIONS_TABLE = 'ailts_sessions';\n        this.MESSAGES_TABLE = 'ailts_messages';\n        this.FEEDBACK_TABLE = 'ailts_feedback';\n        this.METRICS_TABLE = 'ailts_metrics';\n        this.RECORDINGS_TABLE = 'ailts_recordings';\n        this.TEMPLATE_QUESTIONS_TABLE = 'ailts_template_questions';\n        this.TEMPLATE_TOPICS_TABLE = 'ailts_template_topics';\n        this.TEMPLATE_VOCABULARY_TABLE = 'ailts_template_vocabulary';\n        this.RECORDINGS_BUCKET = 'ielts-recordings';\n    }\n}\nconst supabaseService = new SupabaseService();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9zZXJ2aWNlcy9zdXBhYmFzZVNlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBcUQ7QUFFckQsSUFBSSxLQUFtRixFQUFFLEVBRXhGO0FBRUQsTUFBTU0sV0FBV04sbUVBQVlBLENBQzNCQywwQ0FBb0MsRUFDcENBLGtOQUF5QztBQTREM0MsTUFBTU07SUFZSixNQUFNQyxhQUFhQyxJQUFhLEVBQTRCO1FBQzFELElBQUk7WUFDRixJQUFJQyxRQUFRSixTQUNUSyxJQUFJLENBQUMsSUFBSSxDQUFDQyxlQUFlLEVBQ3pCQyxNQUFNLENBQUMsdUNBR0csT0FERyxJQUFJLENBQUNDLHdCQUF3QixFQUFDLDRDQUU3QixPQURKLElBQUksQ0FBQ0MscUJBQXFCLEVBQUMsdUNBQ1EsT0FBL0IsSUFBSSxDQUFDQyx5QkFBeUIsRUFBQztZQUdoRCxJQUFJUCxNQUFNO2dCQUNSQyxRQUFRQSxNQUFNTyxFQUFFLENBQUMsUUFBUVI7WUFDM0I7WUFFQSxNQUFNLEVBQUVTLElBQUksRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTVQsTUFBTVUsS0FBSyxDQUFDLGNBQWM7Z0JBQUVDLFdBQVc7WUFBTTtZQUUzRSxJQUFJRixPQUFPLE1BQU1BO1lBQ2pCLE9BQU9ELFFBQVEsRUFBRTtRQUNuQixFQUFFLE9BQU9DLE9BQU87WUFDZEcsUUFBUUgsS0FBSyxDQUFDLDZCQUE2QkE7WUFDM0MsTUFBTUE7UUFDUjtJQUNGO0lBRUEsTUFBTUksY0FBY0MsT0FJbkIsRUFBeUI7UUFDeEIsSUFBSTtZQUNGLGlDQUFpQztZQUNqQyxNQUFNLEVBQUVOLE1BQU1PLFFBQVEsRUFBRU4sT0FBT08sYUFBYSxFQUFFLEdBQUcsTUFBTXBCLFNBQ3BESyxJQUFJLENBQUMsSUFBSSxDQUFDQyxlQUFlLEVBQ3pCQyxNQUFNLENBQUMsTUFDUEksRUFBRSxDQUFDLE1BQU1PLFFBQVFHLFdBQVcsRUFDNUJDLE1BQU07WUFFVCxJQUFJRixpQkFBaUIsQ0FBQ0QsVUFB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QixZQUNqQnRCLEtBQUssQ0FBQyxjQUFjO2dCQUFFQyxXQUFXO1lBQUs7WUFFekMsSUFBSUYsT0FBTyxNQUFNQTtZQUNqQixPQUFPRCxDQUFBQSxpQkFBQUEsMkJBQUFBLEtBQU15RCxHQUFHLENBQUNDLENBQUFBLElBQUtBLEVBQUVULFVBQVUsTUFBSyxFQUFFO1FBQzNDLEVBQUUsT0FBT2hELE9BQU87WUFDZEcsUUFBUUgsS0FBSyxDQUFDLHNDQUFzQ0E7WUFDcEQsTUFBTUE7UUFDUjtJQUNGOzthQWhRaUJQLGtCQUFrQjthQUNsQmlCLGlCQUFpQjthQUNqQmtCLGlCQUFpQjthQUNqQk8saUJBQWlCO2FBQ2pCaUIsZ0JBQWdCO2FBQ2hCTixtQkFBbUI7YUFDbkJuRCwyQkFBMkI7YUFDM0JDLHdCQUF3QjthQUN4QkMsNEJBQTRCO2FBQzVCNEMsb0JBQW9COztBQXdQdkM7QUFFTyxNQUFNaUIsa0JBQWtCLElBQUl0RSxrQkFBa0IiLCJzb3VyY2VzIjpbIkU6XFxTVEFORCBBTE9ORSBBUFBcXHNyY1xcc2VydmljZXNcXHN1cGFiYXNlU2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuXG5pZiAoIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCB8fCAhcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIFN1cGFiYXNlIGVudmlyb25tZW50IHZhcmlhYmxlcycpO1xufVxuXG5jb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChcbiAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMLFxuICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWVxuKTtcblxuaW1wb3J0IHsgcGFydDFUZW1wbGF0ZXMgfSBmcm9tICdAL2RhdGEvc3BlYWtpbmdUZW1wbGF0ZXMvcGFydDEnO1xuaW1wb3J0IHsgcGFydDJUZW1wbGF0ZXMgfSBmcm9tICdAL2RhdGEvc3BlYWtpbmdUZW1wbGF0ZXMvcGFydDInO1xuaW1wb3J0IHsgcGFydDNUZW1wbGF0ZXMgfSBmcm9tICdAL2RhdGEvc3BlYWtpbmdUZW1wbGF0ZXMvcGFydDMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElFTFRTVGVtcGxhdGUge1xuICBpZDogc3RyaW5nO1xuICB0eXBlOiAncGFydDEnIHwgJ3BhcnQyJyB8ICdwYXJ0MycgfCAndHV0b3JpbmcnO1xuICB0aXRsZV9lbjogc3RyaW5nO1xuICB0aXRsZV92aTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbl9lbjogc3RyaW5nO1xuICBkZXNjcmlwdGlvbl92aTogc3RyaW5nO1xuICBsZXZlbDogJ2JlZ2lubmVyJyB8ICdpbnRlcm1lZGlhdGUnIHwgJ2FkdmFuY2VkJztcbiAgdG9waWNzOiBzdHJpbmdbXTtcbiAgZHVyYXRpb246IG51bWJlcjtcbiAgdGFyZ2V0X2JhbmQ6IG51bWJlcjtcbiAgc3lzdGVtX3Byb21wdDogc3RyaW5nO1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIHVwZGF0ZWRfYXQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRUxUU1Nlc3Npb24ge1xuICBpZDogc3RyaW5nO1xuICB1c2VyX2lkOiBzdHJpbmc7XG4gIHRlbXBsYXRlX2lkOiBzdHJpbmc7XG4gIHN0YXJ0X3RpbWU6IHN0cmluZztcbiAgZW5kX3RpbWU6IHN0cmluZyB8IG51bGw7XG4gIGR1cmF0aW9uOiBudW1iZXI7XG4gIG1ldHJpY3M6IHtcbiAgICBmbHVlbmN5OiBudW1iZXI7XG4gICAgbGV4aWNhbDogbnVtYmVyO1xuICAgIGdyYW1tYXI6IG51bWJlcjtcbiAgICBwcm9udW5jaWF0aW9uOiBudW1iZXI7XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUVMVFNNZXNzYWdlIHtcbiAgaWQ6IHN0cmluZztcbiAgc2Vzc2lvbl9pZDogc3RyaW5nO1xuICByb2xlOiAndXNlcicgfCAnYXNzaXN0YW50JztcbiAgY29udGVudDogc3RyaW5nO1xuICBhdWRpb191cmw/OiBzdHJpbmc7XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRUxUU0ZlZWRiYWNrIHtcbiAgaWQ6IHN0cmluZztcbiAgc2Vzc2lvbl9pZDogc3RyaW5nO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIG1ldHJpY3M6IHtcbiAgICBmbHVlbmN5OiBudW1iZXI7XG4gICAgbGV4aWNhbDogbnVtYmVyO1xuICAgIGdyYW1tYXI6IG51bWJlcjtcbiAgICBwcm9udW5jaWF0aW9uOiBudW1iZXI7XG4gIH07XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbn1cblxuY2xhc3MgU3VwYWJhc2VTZXJ2aWNlIHtcbiAgcHJpdmF0ZSByZWFkb25seSBURU1QTEFURVNfVEFCTEUgPSAnYWlsdHNfdGVtcGxhdGVzJztcbiAgcHJpdmF0ZSByZWFkb25seSBTRVNTSU9OU19UQUJMRSA9ICdhaWx0c19zZXNzaW9ucyc7XG4gIHByaXZhdGUgcmVhZG9ubHkgTUVTU0FHRVNfVEFCTEUgPSAnYWlsdHNfbWVzc2FnZXMnO1xuICBwcml2YXRlIHJlYWRvbmx5IEZFRURCQUNLX1RBQkxFID0gJ2FpbHRzX2ZlZWRiYWNrJztcbiAgcHJpdmF0ZSByZWFkb25seSBNRVRSSUNTX1RBQkxFID0gJ2FpbHRzX21ldHJpY3MnO1xuICBwcml2YXRlIHJlYWRvbmx5IFJFQ09SRElOR1NfVEFCTEUgPSAnYWlsdHNfcmVjb3JkaW5ncyc7XG4gIHByaXZhdGUgcmVhZG9ubHkgVEVNUExBVEVfUVVFU1RJT05TX1RBQkxFID0gJ2FpbHRzX3RlbXBsYXRlX3F1ZXN0aW9ucyc7XG4gIHByaXZhdGUgcmVhZG9ubHkgVEVNUExBVEVfVE9QSUNTX1RBQkxFID0gJ2FpbHRzX3RlbXBsYXRlX3RvcGljcyc7XG4gIHByaXZhdGUgcmVhZG9ubHkgVEVNUExBVEVfVk9DQUJVTEFSWV9UQUJMRSA9ICdhaWx0c190ZW1wbGF0ZV92b2NhYnVsYXJ5JztcbiAgcHJpdmF0ZSByZWFkb25seSBSRUNPUkRJTkdTX0JVQ0tFVCA9ICdpZWx0cy1yZWNvcmRpbmdzJztcblxuICBhc3luYyBnZXRUZW1wbGF0ZXModHlwZT86IHN0cmluZyk6IFByb21pc2U8SUVMVFNUZW1wbGF0ZVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCBxdWVyeSA9IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKHRoaXMuVEVNUExBVEVTX1RBQkxFKVxuICAgICAgICAuc2VsZWN0KGBcbiAgICAgICAgICAqLFxuICAgICAgICAgIHF1ZXN0aW9uczoke3RoaXMuVEVNUExBVEVfUVVFU1RJT05TX1RBQkxFfShpZCwgcXVlc3Rpb24sIHR5cGUpLFxuICAgICAgICAgIHRvcGljczoke3RoaXMuVEVNUExBVEVfVE9QSUNTX1RBQkxFfShpZCwgdG9waWMpLFxuICAgICAgICAgIHZvY2FidWxhcnk6JHt0aGlzLlRFTVBMQVRFX1ZPQ0FCVUxBUllfVEFCTEV9KGlkLCB3b3JkLCBtZWFuaW5nLCBleGFtcGxlKVxuICAgICAgICBgKTtcblxuICAgICAgaWYgKHR5cGUpIHtcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5lcSgndHlwZScsIHR5cGUpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBxdWVyeS5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcblxuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgICAgIHJldHVybiBkYXRhIHx8IFtdO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB0ZW1wbGF0ZXM6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlU2Vzc2lvbihzZXNzaW9uOiB7XG4gICAgdXNlcl9pZDogc3RyaW5nO1xuICAgIHRlbXBsYXRlX2lkOiBzdHJpbmc7XG4gICAgZHVyYXRpb246IG51bWJlcjtcbiAgfSk6IFByb21pc2U8SUVMVFNTZXNzaW9uPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEZpcnN0IGNoZWNrIGlmIHRlbXBsYXRlIGV4aXN0c1xuICAgICAgY29uc3QgeyBkYXRhOiB0ZW1wbGF0ZSwgZXJyb3I6IHRlbXBsYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKHRoaXMuVEVNUExBVEVTX1RBQkxFKVxuICAgICAgICAuc2VsZWN0KCdpZCcpXG4gICAgICAgIC5lcSgnaWQnLCBzZXNzaW9uLnRlbXBsYXRlX2lkKVxuICAgICAgICAuc2luZ2xlKCk7XG5cbiAgICAgIGlmICh0ZW1wbGF0ZUVycm9yIHx8ICF0ZW1wbGF0ZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RlbXBsYXRlIG5vdCBmb3VuZCcpO1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgc2Vzc2lvbiB3aXRoIHByb3BlciBVVUlEIGZvciB1c2VyX2lkXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSh0aGlzLlNFU1NJT05TX1RBQkxFKVxuICAgICAgICAuaW5zZXJ0KHtcbiAgICAgICAgICB1c2VyX2lkOiBzZXNzaW9uLnVzZXJfaWQsXG4gICAgICAgICAgdGVtcGxhdGVfaWQ6IHNlc3Npb24udGVtcGxhdGVfaWQsXG4gICAgICAgICAgZHVyYXRpb246IHNlc3Npb24uZHVyYXRpb24sXG4gICAgICAgICAgc3RhcnRfdGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgIG1ldHJpY3M6IHtcbiAgICAgICAgICAgIGZsdWVuY3k6IDAsXG4gICAgICAgICAgICBsZXhpY2FsOiAwLFxuICAgICAgICAgICAgZ3JhbW1hcjogMCxcbiAgICAgICAgICAgIHByb251bmNpYXRpb246IDBcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgICAuc2luZ2xlKCk7XG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBlcnJvcjonLCBlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBkYXRhIHJldHVybmVkIGZyb20gc2Vzc2lvbiBjcmVhdGlvbicpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgc2Vzc2lvbjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBlbmRTZXNzaW9uKHNlc3Npb25faWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSh0aGlzLlNFU1NJT05TX1RBQkxFKVxuICAgICAgICAudXBkYXRlKHsgZW5kX3RpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9KVxuICAgICAgICAuZXEoJ2lkJywgc2Vzc2lvbl9pZCk7XG5cbiAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGVuZGluZyBzZXNzaW9uOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZU1lc3NhZ2UobWVzc2FnZToge1xuICAgIHNlc3Npb25faWQ6IHN0cmluZztcbiAgICByb2xlOiAndXNlcicgfCAnYXNzaXN0YW50JztcbiAgICBjb250ZW50OiBzdHJpbmc7XG4gICAgYXVkaW9fdXJsPzogc3RyaW5nO1xuICB9KTogUHJvbWlzZTxJRUxUU01lc3NhZ2U+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20odGhpcy5NRVNTQUdFU19UQUJMRSlcbiAgICAgICAgLmluc2VydCh7XG4gICAgICAgICAgc2Vzc2lvbl9pZDogbWVzc2FnZS5zZXNzaW9uX2lkLFxuICAgICAgICAgIHJvbGU6IG1lc3NhZ2Uucm9sZSxcbiAgICAgICAgICBjb250ZW50OiBtZXNzYWdlLmNvbnRlbnQsXG4gICAgICAgICAgYXVkaW9fdXJsOiBtZXNzYWdlLmF1ZGlvX3VybCxcbiAgICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfSlcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKTtcblxuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBtZXNzYWdlOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUZlZWRiYWNrKGZlZWRiYWNrOiB7XG4gICAgc2Vzc2lvbl9pZDogc3RyaW5nO1xuICAgIGNvbnRlbnQ6IHN0cmluZztcbiAgICBtZXRyaWNzOiBJRUxUU0ZlZWRiYWNrWydtZXRyaWNzJ107XG4gIH0pOiBQcm9taXNlPElFTFRTRmVlZGJhY2s+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20odGhpcy5GRUVEQkFDS19UQUJMRSlcbiAgICAgICAgLmluc2VydCh7XG4gICAgICAgICAgc2Vzc2lvbl9pZDogZmVlZGJhY2suc2Vzc2lvbl9pZCxcbiAgICAgICAgICBjb250ZW50OiBmZWVkYmFjay5jb250ZW50LFxuICAgICAgICAgIG1ldHJpY3M6IGZlZWRiYWNrLm1ldHJpY3MsXG4gICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH0pXG4gICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAuc2luZ2xlKCk7XG5cbiAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZmVlZGJhY2s6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBsb2FkQXVkaW8oZmlsZTogRmlsZSwgc2Vzc2lvbl9pZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZmlsZW5hbWUgPSBgJHtzZXNzaW9uX2lkfS8ke0RhdGUubm93KCl9LndlYm1gO1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2Uuc3RvcmFnZVxuICAgICAgICAuZnJvbSh0aGlzLlJFQ09SRElOR1NfQlVDS0VUKVxuICAgICAgICAudXBsb2FkKGZpbGVuYW1lLCBmaWxlKTtcblxuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcblxuICAgICAgY29uc3QgeyBkYXRhOiB1cmxEYXRhIH0gPSBzdXBhYmFzZS5zdG9yYWdlXG4gICAgICAgIC5mcm9tKHRoaXMuUkVDT1JESU5HU19CVUNLRVQpXG4gICAgICAgIC5nZXRQdWJsaWNVcmwoZmlsZW5hbWUpO1xuXG4gICAgICAvLyBSZWNvcmQgdGhlIGF1ZGlvIGZpbGUgaW4gdGhlIHJlY29yZGluZ3MgdGFibGVcbiAgICAgIGNvbnN0IHsgZXJyb3I6IHJlY29yZEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSh0aGlzLlJFQ09SRElOR1NfVEFCTEUpXG4gICAgICAgIC5pbnNlcnQoe1xuICAgICAgICAgIHNlc3Npb25faWQsXG4gICAgICAgICAgZmlsZV9wYXRoOiBmaWxlbmFtZSxcbiAgICAgICAgICBwdWJsaWNfdXJsOiB1cmxEYXRhLnB1YmxpY1VybCxcbiAgICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfSk7XG5cbiAgICAgIGlmIChyZWNvcmRFcnJvcikgdGhyb3cgcmVjb3JkRXJyb3I7XG5cbiAgICAgIHJldHVybiB1cmxEYXRhLnB1YmxpY1VybDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBsb2FkaW5nIGF1ZGlvOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVNlc3Npb25NZXRyaWNzKHNlc3Npb25faWQ6IHN0cmluZywgbWV0cmljczogSUVMVFNTZXNzaW9uWydtZXRyaWNzJ10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20odGhpcy5TRVNTSU9OU19UQUJMRSlcbiAgICAgICAgLnVwZGF0ZSh7IG1ldHJpY3MgfSlcbiAgICAgICAgLmVxKCdpZCcsIHNlc3Npb25faWQpO1xuXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuXG4gICAgICAvLyBBbHNvIHJlY29yZCBpbiB0aGUgbWV0cmljcyB0YWJsZSBmb3IgaGlzdG9yaWNhbCB0cmFja2luZ1xuICAgICAgY29uc3QgeyBlcnJvcjogbWV0cmljc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSh0aGlzLk1FVFJJQ1NfVEFCTEUpXG4gICAgICAgIC5pbnNlcnQoe1xuICAgICAgICAgIHNlc3Npb25faWQsXG4gICAgICAgICAgbWV0cmljcyxcbiAgICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfSk7XG5cbiAgICAgIGlmIChtZXRyaWNzRXJyb3IpIHRocm93IG1ldHJpY3NFcnJvcjtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgc2Vzc2lvbiBtZXRyaWNzOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFNlc3Npb25NZXNzYWdlcyhzZXNzaW9uX2lkOiBzdHJpbmcpOiBQcm9taXNlPElFTFRTTWVzc2FnZVtdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKHRoaXMuTUVTU0FHRVNfVEFCTEUpXG4gICAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgICAuZXEoJ3Nlc3Npb25faWQnLCBzZXNzaW9uX2lkKVxuICAgICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogdHJ1ZSB9KTtcblxuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgICAgIHJldHVybiBkYXRhIHx8IFtdO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBzZXNzaW9uIG1lc3NhZ2VzOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldFNlc3Npb25GZWVkYmFjayhzZXNzaW9uX2lkOiBzdHJpbmcpOiBQcm9taXNlPElFTFRTRmVlZGJhY2tbXT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSh0aGlzLkZFRURCQUNLX1RBQkxFKVxuICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgLmVxKCdzZXNzaW9uX2lkJywgc2Vzc2lvbl9pZClcbiAgICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IHRydWUgfSk7XG5cbiAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG4gICAgICByZXR1cm4gZGF0YSB8fCBbXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgc2Vzc2lvbiBmZWVkYmFjazonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRTZXNzaW9uUmVjb3JkaW5ncyhzZXNzaW9uX2lkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKHRoaXMuUkVDT1JESU5HU19UQUJMRSlcbiAgICAgICAgLnNlbGVjdCgncHVibGljX3VybCcpXG4gICAgICAgIC5lcSgnc2Vzc2lvbl9pZCcsIHNlc3Npb25faWQpXG4gICAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiB0cnVlIH0pO1xuXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuICAgICAgcmV0dXJuIGRhdGE/Lm1hcChyID0+IHIucHVibGljX3VybCkgfHwgW107XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHNlc3Npb24gcmVjb3JkaW5nczonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlU2VydmljZSA9IG5ldyBTdXBhYmFzZVNlcnZpY2UoKTtcbiJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJFcnJvciIsInN1cGFiYXNlIiwiU3VwYWJhc2VTZXJ2aWNlIiwiZ2V0VGVtcGxhdGVzIiwidHlwZSIsInF1ZXJ5IiwiZnJvbSIsIlRFTVBMQVRFU19UQUJMRSIsInNlbGVjdCIsIlRFTVBMQVRFX1FVRVNUSU9OU19UQUJMRSIsIlRFTVBMQVRFX1RPUElDU19UQUJMRSIsIlRFTVBMQVRFX1ZPQ0FCVUxBUllfVEFCTEUiLCJlcSIsImRhdGEiLCJlcnJvciIsIm9yZGVyIiwiYXNjZW5kaW5nIiwiY29uc29sZSIsImNyZWF0ZVNlc3Npb24iLCJzZXNzaW9uIiwidGVtcGxhdGUiLCJ0ZW1wbGF0ZUVycm9yIiwidGVtcGxhdGVfaWQiLCJzaW5nbGUiLCJTRVNTSU9OU19UQUJMRSIsImluc2VydCIsInVzZXJfaWQiLCJkdXJhdGlvbiIsInN0YXJ0X3RpbWUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJtZXRyaWNzIiwiZmx1ZW5jeSIsImxleGljYWwiLCJncmFtbWFyIiwicHJvbnVuY2lhdGlvbiIsImVuZFNlc3Npb24iLCJzZXNzaW9uX2lkIiwidXBkYXRlIiwiZW5kX3RpbWUiLCJjcmVhdGVNZXNzYWdlIiwibWVzc2FnZSIsIk1FU1NBR0VTX1RBQkxFIiwicm9sZSIsImNvbnRlbnQiLCJhdWRpb191cmwiLCJjcmVhdGVkX2F0IiwiY3JlYXRlRmVlZGJhY2siLCJmZWVkYmFjayIsIkZFRURCQUNLX1RBQkxFIiwidXBsb2FkQXVkaW8iLCJmaWxlIiwiZmlsZW5hbWUiLCJub3ciLCJzdG9yYWdlIiwiUkVDT1JESU5HU19CVUNLRVQiLCJ1cGxvYWQiLCJ1cmxEYXRhIiwiZ2V0UHVibGljVXJsIiwicmVjb3JkRXJyb3IiLCJSRUNPUkRJTkdTX1RBQkxFIiwiZmlsZV9wYXRoIiwicHVibGljX3VybCIsInB1YmxpY1VybCIsInVwZGF0ZVNlc3Npb25NZXRyaWNzIiwibWV0cmljc0Vycm9yIiwiTUVUUklDU19UQUJMRSIsImdldFNlc3Npb25NZXNzYWdlcyIsImdldFNlc3Npb25GZWVkYmFjayIsImdldFNlc3Npb25SZWNvcmRpbmdzIiwibWFwIiwiciIsInN1cGFiYXNlU2VydmljZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/services/supabaseService.ts\n"));

/***/ })

});