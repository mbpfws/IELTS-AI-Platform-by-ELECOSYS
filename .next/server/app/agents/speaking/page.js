(()=>{var e={};e.id=528,e.ids=[528],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4379:e=>{"use strict";e.exports=require("node:path")},1708:e=>{"use strict";e.exports=require("node:process")},3136:e=>{"use strict";e.exports=require("node:url")},7460:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>s.a,__next_app__:()=>h,pages:()=>u,routeModule:()=>d,tree:()=>c});var o=a(260),i=a(8203),n=a(5155),s=a.n(n),r=a(7292),l={};for(let e in r)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>r[e]);a.d(t,l);let c=["",{children:["agents",{children:["speaking",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,7815)),"e:\\STAND ALONE APP\\src\\app\\agents\\speaking\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,12)),"e:\\STAND ALONE APP\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9937,23)),"next/dist/client/components/not-found-error"]}],u=["e:\\STAND ALONE APP\\src\\app\\agents\\speaking\\page.tsx"],h={require:a,loadChunk:()=>Promise.resolve()},d=new o.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/agents/speaking/page",pathname:"/agents/speaking",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4367:(e,t,a)=>{Promise.resolve().then(a.bind(a,7815))},1319:(e,t,a)=>{Promise.resolve().then(a.bind(a,189))},9905:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});let o=(0,a(1680).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},189:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>tP});var o=a(5512),i=a(8009),n=a(1412),s=a(6004),r=a(4950),l=a(9952),c=a(96),u=a(830),h=a(2828),d=a(3024),p=a(9018),m="rovingFocusGroup.onEntryFocus",g={bubbles:!1,cancelable:!0},y="RovingFocusGroup",[f,v,b]=(0,r.N)(y),[w,x]=function(e,t=[]){let a=[],n=()=>{let t=a.map(e=>i.createContext(e));return function(a){let o=a?.[e]||t;return i.useMemo(()=>({[`__scope${e}`]:{...a,[e]:o}}),[a,o])}};return n.scopeName=e,[function(t,n){let s=i.createContext(n),r=a.length;function l(t){let{scope:a,children:n,...l}=t,c=a?.[e][r]||s,u=i.useMemo(()=>l,Object.values(l));return(0,o.jsx)(c.Provider,{value:u,children:n})}return a=[...a,n],l.displayName=t+"Provider",[l,function(a,o){let l=o?.[e][r]||s,c=i.useContext(l);if(c)return c;if(void 0!==n)return n;throw Error(`\`${a}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let o=a.reduce((t,{useScope:a,scopeName:o})=>{let i=a(e)[`__scope${o}`];return{...t,...i}},{});return i.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return a.scopeName=t.scopeName,a}(n,...t)]}(y,[b]),[_,W]=w(y),k=i.forwardRef((e,t)=>(0,o.jsx)(f.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,o.jsx)(f.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,o.jsx)(j,{...e,ref:t})})}));k.displayName=y;var j=i.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:a,orientation:s,loop:r=!1,dir:c,currentTabStopId:y,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:b,onEntryFocus:w,preventScrollOnEntryFocus:x=!1,...W}=e,k=i.useRef(null),j=(0,l.s)(t,k),D=(0,p.jH)(c),[S=null,N]=(0,d.i)({prop:y,defaultProp:f,onChange:b}),[A,T]=i.useState(!1),H=(0,h.c)(w),M=v(a),I=i.useRef(!1),[P,R]=i.useState(0);return i.useEffect(()=>{let e=k.current;if(e)return e.addEventListener(m,H),()=>e.removeEventListener(m,H)},[H]),(0,o.jsx)(_,{scope:a,orientation:s,dir:D,loop:r,currentTabStopId:S,onItemFocus:i.useCallback(e=>N(e),[N]),onItemShiftTab:i.useCallback(()=>T(!0),[]),onFocusableItemAdd:i.useCallback(()=>R(e=>e+1),[]),onFocusableItemRemove:i.useCallback(()=>R(e=>e-1),[]),children:(0,o.jsx)(u.sG.div,{tabIndex:A||0===P?-1:0,"data-orientation":s,...W,ref:j,style:{outline:"none",...e.style},onMouseDown:(0,n.m)(e.onMouseDown,()=>{I.current=!0}),onFocus:(0,n.m)(e.onFocus,e=>{let t=!I.current;if(e.target===e.currentTarget&&t&&!A){let t=new CustomEvent(m,g);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=M().filter(e=>e.focusable);C([e.find(e=>e.active),e.find(e=>e.id===S),...e].filter(Boolean).map(e=>e.ref.current),x)}}I.current=!1}),onBlur:(0,n.m)(e.onBlur,()=>T(!1))})})}),D="RovingFocusGroupItem",S=i.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:a,focusable:s=!0,active:r=!1,tabStopId:l,...h}=e,d=(0,c.B)(),p=l||d,m=W(D,a),g=m.currentTabStopId===p,y=v(a),{onFocusableItemAdd:b,onFocusableItemRemove:w}=m;return i.useEffect(()=>{if(s)return b(),()=>w()},[s,b,w]),(0,o.jsx)(f.ItemSlot,{scope:a,id:p,focusable:s,active:r,children:(0,o.jsx)(u.sG.span,{tabIndex:g?0:-1,"data-orientation":m.orientation,...h,ref:t,onMouseDown:(0,n.m)(e.onMouseDown,e=>{s?m.onItemFocus(p):e.preventDefault()}),onFocus:(0,n.m)(e.onFocus,()=>m.onItemFocus(p)),onKeyDown:(0,n.m)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){m.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let t=function(e,t,a){var o;let i=(o=e.key,"rtl"!==a?o:"ArrowLeft"===o?"ArrowRight":"ArrowRight"===o?"ArrowLeft":o);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(i))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(i)))return N[i]}(e,m.orientation,m.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let a=y().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)a.reverse();else if("prev"===t||"next"===t){"prev"===t&&a.reverse();let o=a.indexOf(e.currentTarget);a=m.loop?function(e,t){return e.map((a,o)=>e[(t+o)%e.length])}(a,o+1):a.slice(o+1)}setTimeout(()=>C(a))}})})})});S.displayName=D;var N={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function C(e,t=!1){let a=document.activeElement;for(let o of e)if(o===a||(o.focus({preventScroll:t}),document.activeElement!==a))return}var A=a(8060),T="Tabs",[H,M]=(0,s.A)(T,[x]),I=x(),[P,R]=H(T),E=i.forwardRef((e,t)=>{let{__scopeTabs:a,value:i,onValueChange:n,defaultValue:s,orientation:r="horizontal",dir:l,activationMode:h="automatic",...m}=e,g=(0,p.jH)(l),[y,f]=(0,d.i)({prop:i,onChange:n,defaultProp:s});return(0,o.jsx)(P,{scope:a,baseId:(0,c.B)(),value:y,onValueChange:f,orientation:r,dir:g,activationMode:h,children:(0,o.jsx)(u.sG.div,{dir:g,"data-orientation":r,...m,ref:t})})});E.displayName=T;var q="TabsList",F=i.forwardRef((e,t)=>{let{__scopeTabs:a,loop:i=!0,...n}=e,s=R(q,a),r=I(a);return(0,o.jsx)(k,{asChild:!0,...r,orientation:s.orientation,dir:s.dir,loop:i,children:(0,o.jsx)(u.sG.div,{role:"tablist","aria-orientation":s.orientation,...n,ref:t})})});F.displayName=q;var B="TabsTrigger",z=i.forwardRef((e,t)=>{let{__scopeTabs:a,value:i,disabled:s=!1,...r}=e,l=R(B,a),c=I(a),h=G(l.baseId,i),d=L(l.baseId,i),p=i===l.value;return(0,o.jsx)(S,{asChild:!0,...c,focusable:!s,active:p,children:(0,o.jsx)(u.sG.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":d,"data-state":p?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:h,...r,ref:t,onMouseDown:(0,n.m)(e.onMouseDown,e=>{s||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(i)}),onKeyDown:(0,n.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(i)}),onFocus:(0,n.m)(e.onFocus,()=>{let e="manual"!==l.activationMode;p||s||!e||l.onValueChange(i)})})})});z.displayName=B;var U="TabsContent",O=i.forwardRef((e,t)=>{let{__scopeTabs:a,value:n,forceMount:s,children:r,...l}=e,c=R(U,a),h=G(c.baseId,n),d=L(c.baseId,n),p=n===c.value,m=i.useRef(p);return i.useEffect(()=>{let e=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,o.jsx)(A.C,{present:s||p,children:({present:a})=>(0,o.jsx)(u.sG.div,{"data-state":p?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":h,hidden:!a,id:d,tabIndex:0,...l,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:a&&r})})});function G(e,t){return`${e}-trigger-${t}`}function L(e,t){return`${e}-content-${t}`}O.displayName=U;var $=a(4195);let V=i.forwardRef(({className:e,...t},a)=>(0,o.jsx)(F,{ref:a,className:(0,$.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));V.displayName=F.displayName;let Q=i.forwardRef(({className:e,...t},a)=>(0,o.jsx)(z,{ref:a,className:(0,$.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Q.displayName=z.displayName;let X=i.forwardRef(({className:e,...t},a)=>(0,o.jsx)(O,{ref:a,className:(0,$.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));X.displayName=O.displayName;var K=a(9400),Z=a(4590),Y=a(5810);let J="AIzaSyAQ3PJQLvuTKaw-fKEfnINCDJ2uvsv-jiQ";if(!J)throw Error("Missing NEXT_PUBLIC_GEMINI_API_KEY environment variable");let ee=new Y.ij(J);class et{constructor(){this.model=ee.getGenerativeModel({model:"learnlm-1.5-pro-experimental"})}static getInstance(){return et.instance||(et.instance=new et),et.instance}async generateResponse(e){try{let t=await this.model.generateContent(e);return(await t.response).text()}catch(e){throw console.error("Error generating response:",e),e}}async generateChat(e){try{let t=this.model.startChat({history:e.map(e=>({role:"user"===e.role?"user":"model",parts:e.content}))}),a=await t.sendMessage(e[e.length-1].content);return(await a.response).text()}catch(e){throw console.error("Error in chat generation:",e),e}}}let ea=et.getInstance(),eo="AIzaSyAQ3PJQLvuTKaw-fKEfnINCDJ2uvsv-jiQ";if(!eo)throw Error("Missing NEXT_PUBLIC_GEMINI_API_KEY environment variable");class ei{constructor(){this.genAI=new Y.ij(eo)}static getInstance(){return ei.instance||(ei.instance=new ei),ei.instance}async processAudio(e,t="conversation"){try{let a=await this.blobToBase64(e),o=this.genAI.getGenerativeModel({model:"learnlm-1.5-pro-experimental"}),i="conversation"===t?"Please transcribe this audio and respond naturally as a conversation partner.":`Please analyze this speaking response and provide feedback in both English and Vietnamese. Focus on:
          1. Pronunciation and Intonation
          2. Grammar and Vocabulary
          3. Fluency and Coherence
          4. Task Achievement
          
          Also include a JSON metrics object at the end with this structure:
          {
            "scores": {
              "pronunciation": number (0-9),
              "grammar": number (0-9),
              "vocabulary": number (0-9),
              "fluency": number (0-9),
              "coherence": number (0-9)
            },
            "overallBand": number (0-9),
            "feedback": {
              "strengths": string[],
              "improvements": string[],
              "tips": string[]
            },
            "nextSteps": string[]
          }`;return(await o.generateContent([{inlineData:{mimeType:"audio/wav",data:a}},{text:i}])).response.text()}catch(e){throw console.error("Error processing audio:",e),e}}async blobToBase64(e){return new Promise((t,a)=>{let o=new FileReader;o.onloadend=()=>{"string"==typeof o.result?t(o.result.split(",")[1]):a(Error("Failed to convert blob to base64"))},o.onerror=a,o.readAsDataURL(e)})}}let en=ei.getInstance();class es{async enqueue(e){this.queue.push(e),this.processing||await this.processQueue()}async processQueue(){if(0===this.queue.length){this.processing=!1;return}this.processing=!0;let e=this.queue.shift();try{await this.processMessage(e)}catch(e){console.error("Error processing message:",e)}await this.processQueue()}async processMessage(e){let t=await fetch("/api/speaking/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,sessionId:e.sessionId})});if(!t.ok)throw Error("Failed to process message");return t.json()}constructor(){this.queue=[],this.processing=!1}}class er{constructor(){this.currentSession=null,this.processingQueue=[],this.isProcessing=!1,this.messageQueue=new es}static getInstance(){return er.instance||(er.instance=new er),er.instance}async startSession(e,t,a="free",o){try{let i=`speaking_${Date.now()}`;this.currentSession={id:i,userId:e,mode:a,templateId:o,startTime:Date.now(),duration:6e4*t,messages:[],audioUrls:[],metrics:{pronunciation:0,grammar:0,vocabulary:0,fluency:0,coherence:0}};let n=this.getWelcomeMessage(t);return await this.addMessage({role:"assistant",content:n,sessionId:i}),this.saveSession(this.currentSession),this.currentSession}catch(e){throw console.error("Error starting session:",e),e}}getWelcomeMessage(e){return`Xin ch\xe0o! T\xf4i l\xe0 trợ l\xfd luyện n\xf3i IELTS của bạn. Ch\xfang ta sẽ c\xf3 ${e} ph\xfat để luyện tập c\xf9ng nhau. 
    
Trong suốt phi\xean n\xe0y, ch\xfang ta sẽ tập trung v\xe0o:
- Ph\xe1t \xe2m v\xe0 ngữ điệu
- Từ vựng v\xe0 ngữ ph\xe1p
- T\xednh lưu lo\xe1t trong giao tiếp

T\xf4i sẽ đ\xf3ng vai tr\xf2 l\xe0 người đối thoại v\xe0 hướng dẫn bạn. Bạn c\xf3 thể n\xf3i tự nhi\xean, v\xe0 t\xf4i sẽ chỉ đưa ra nhận x\xe9t chi tiết v\xe0o cuối phi\xean.

Bạn muốn bắt đầu với chủ đề n\xe0o?`}async sendMessage(e,t){return new Promise((t,a)=>{this.processingQueue.push(async()=>{try{if(!this.currentSession)throw Error("No active session");if(this.isSessionExpired()){let e=await this.generateFeedback();return this.endSession(e),`Phi\xean luyện tập đ\xe3 kết th\xfac. Dưới đ\xe2y l\xe0 nhận x\xe9t chi tiết của t\xf4i:

${JSON.stringify(e,null,2)}`}this.addMessage({role:"user",content:e});let a=await ea.generateChat([{role:"assistant",content:this.getWelcomeMessage(this.currentSession.duration/6e4)},{role:"user",content:e}]);this.addMessage({role:"assistant",content:a}),t(a)}catch(e){a(e)}}),this.processQueue()})}async sendAudio(e){if(!this.currentSession)throw Error("No active session");try{let t=this.currentSession.startTime+this.currentSession.duration-Date.now(),a=await en.processAudio(e,t<=6e4?"scoring":"conversation"),o={role:"assistant",content:a};return this.addMessage(o),o}catch(e){throw console.error("Error sending audio:",e),e}}async generateFeedback(){if(!this.currentSession)return null;let e={duration:this.currentSession.duration,actualDuration:Date.now()-this.currentSession.startTime,messages:this.currentSession.messages,audioRecordings:this.currentSession.audioUrls||[]},t=this.currentSession.messages.filter(e=>"user"===e.role),a=[];for(let e=1;e<t.length;e++){let o=t[e].timestamp-t[e-1].timestamp;a.push(o)}let o=a.length>0?a.reduce((e,t)=>e+t,0)/a.length:0,i=t.map(e=>e.content.split(" ").length).reduce((e,t)=>e+t,0)/t.length;return e.duration,JSON.stringify(e.messages),{scores:{pronunciation:this.calculatePronunciationScore(e),grammar:this.calculateGrammarScore(e),vocabulary:this.calculateVocabularyScore(e),fluency:this.calculateFluencyScore(o),coherence:this.calculateCoherenceScore(i)},overallBand:0,feedback:{strengths:this.identifyStrengths(e),improvements:this.identifyImprovements(e),tips:["Practice speaking more frequently","Record yourself and analyze your speech","Focus on reducing response time"]},sessionStats:{avgResponseTime:o/1e3,avgAnswerLength:i,totalMessages:t.length,totalDuration:e.actualDuration/6e4},detailedFeedback:{english:this.generateDetailedFeedback(e,"en"),vietnamese:this.generateDetailedFeedback(e,"vi")}}}calculatePronunciationScore(e){return e.audioRecordings.length>0?7:6}calculateGrammarScore(e){let t=e.messages.filter(e=>"user"===e.role);return Math.min(9,Math.max(5,Math.floor(t.map(e=>e.content.split(" ").length).reduce((e,t)=>e+t,0)/t.length/10)+5))}calculateVocabularyScore(e){return Math.min(9,Math.max(5,Math.floor(new Set(e.messages.filter(e=>"user"===e.role).map(e=>e.content.toLowerCase().split(/\W+/)).flat()).size/20)+5))}calculateFluencyScore(e){return Math.min(9,Math.max(5,7-Math.floor(e/5e3)))}calculateCoherenceScore(e){return Math.min(9,Math.max(5,Math.floor(e/15)+5))}identifyStrengths(e){let t=[],a=e.messages.filter(e=>"user"===e.role);return a.length>0&&(a.map(e=>e.content.split(" ").length).reduce((e,t)=>e+t,0)/a.length>20&&t.push("Good at developing answers with sufficient detail"),e.audioRecordings.length>0&&t.push("Willing to practice with voice recordings"),a.length>5&&t.push("Active participation in conversation")),t}identifyImprovements(e){let t=[],a=e.messages.filter(e=>"user"===e.role);return a.length>0&&(a.map(e=>e.content.split(" ").length).reduce((e,t)=>e+t,0)/a.length<15&&t.push("Try to develop answers with more detail"),0===e.audioRecordings.length&&t.push("Practice more with voice recordings"),a.length<5&&t.push("Try to engage more in the conversation")),t}generateDetailedFeedback(e,t){let a=e.messages.filter(e=>"user"===e.role),o=a.map(e=>e.content.split(" ").length).reduce((e,t)=>e+t,0)/a.length;return"en"===t?`During this ${e.duration/6e4}-minute session, you provided ${a.length} responses with an average length of ${Math.round(o)} words. ${this.getEngagementFeedback(a.length,o)}`:`Trong phi\xean ${e.duration/6e4} ph\xfat n\xe0y, bạn đ\xe3 đưa ra ${a.length} c\xe2u trả lời với độ d\xe0i trung b\xecnh ${Math.round(o)} từ. ${this.getEngagementFeedbackVietnamese(a.length,o)}`}getEngagementFeedback(e,t){return e>10&&t>20?"Your engagement level was excellent, with detailed responses.":e>5?"You maintained good conversation flow but could develop answers more.":"Try to engage more actively in future sessions."}getEngagementFeedbackVietnamese(e,t){return e>10&&t>20?"Mức độ tương t\xe1c của bạn rất tốt, với c\xe1c c\xe2u trả lời chi tiết.":e>5?"Bạn duy tr\xec được luồng hội thoại tốt nhưng c\xf3 thể ph\xe1t triển c\xe2u trả lời nhiều hơn.":"H\xe3y cố gắng tương t\xe1c t\xedch cực hơn trong c\xe1c phi\xean sau."}endSession(e){this.currentSession&&(this.currentSession.endTime=Date.now(),e&&(this.currentSession.metrics=e),this.saveSession(this.currentSession),this.updateHistory(this.currentSession),this.currentSession=null)}addMessage(e){if(this.currentSession){let t={...e,timestamp:Date.now()};return this.currentSession.messages.push(t),this.saveSession(this.currentSession),t}return null}addAudioUrl(e){this.currentSession&&(this.currentSession.audioUrls.push(e),this.saveSession(this.currentSession))}saveSession(e){try{let t=this.getSessions(e.userId);t[e.id]=e,localStorage.setItem(`speaking_sessions_${e.userId}`,JSON.stringify(t))}catch(e){console.error("Error saving session:",e)}}getSessions(e){try{let t=localStorage.getItem(`speaking_sessions_${e}`);return t?JSON.parse(t):{}}catch(e){return console.error("Error getting sessions:",e),{}}}updateHistory(e){try{let t=this.getHistory(e.userId);t.sessions[e.id]=e,t.totalSessions+=1;let a=Object.values(t.sessions),o=a.reduce((e,t)=>e+(t.metrics?.overallBand||0),0);t.averageBand=o/a.length;let i=a.reduce((e,t)=>e+((t.endTime||0)-t.startTime),0);t.timeSpent=Math.round(i/6e4),t.lastSessionDate=e.endTime||Date.now(),localStorage.setItem(`speaking_history_${e.userId}`,JSON.stringify(t))}catch(e){console.error("Error updating history:",e)}}getHistory(e){try{let t=localStorage.getItem(`speaking_history_${e}`);if(t)return JSON.parse(t);return{userId:e,sessions:{},stats:{totalSessions:0,averageBand:0,timeSpent:0,lastSessionDate:0}}}catch(t){return console.error("Error getting history:",t),{userId:e,sessions:{},stats:{totalSessions:0,averageBand:0,timeSpent:0,lastSessionDate:0}}}}getCurrentSession(){return this.currentSession}getRecentSessions(e,t=5){return Object.values(this.getSessions(e)).sort((e,t)=>t.startTime-e.startTime).slice(0,t)}getSession(e,t){return this.getSessions(e)[t]||null}async processQueue(){if(!this.isProcessing&&0!==this.processingQueue.length){this.isProcessing=!0;try{let e=this.processingQueue.shift();e&&await e()}finally{this.isProcessing=!1,this.processingQueue.length>0&&this.processQueue()}}}getRemainingTime(){if(!this.currentSession)return 0;let e=Date.now()-this.currentSession.startTime;return Math.max(0,this.currentSession.duration-e)}isSessionExpired(){return 0>=this.getRemainingTime()}}let el=er.getInstance(),ec=[{id:"free_chat",titleVi:"Tr\xf2 chuyện tự do",titleEn:"Free Chat Practice",descriptionVi:"Tr\xf2 chuyện tự do với AI tutor để luyện tập tiếng Anh",descriptionEn:"Practice general conversation skills without a specific template",taskType:"free_chat",level:"All Levels",targetBand:"Any",criteria:["Fluency","Vocabulary","Grammar","Pronunciation"]},...Object.entries({speaking_part1_intro:["Can you tell me your full name?","What can I call you?","Where are you from?","Can you tell me about your family?","Do you work or are you a student?"],speaking_part1_hometown:["Where is your hometown?","What do you like about your hometown?","Has your hometown changed much since you were a child?","Would you like to live there in the future?","What's the most interesting part of your hometown?"],speaking_part1_daily_routine:["What do you do in your free time?","What's your typical daily routine?","Do you prefer morning or evening activities?","How do you usually spend your weekends?","What time do you usually get up in the morning?"],speaking_part1_work_study:["What do you do for work/study?","Why did you choose this job/course?","What do you like about your work/studies?","What are your future career plans?","Would you like to change your job/course in the future?"],speaking_part1_hobbies:["What are your hobbies?","How long have you been doing these hobbies?","Do you prefer indoor or outdoor activities?","How much time do you spend on your hobbies?","Would you like to try any new hobbies?"],speaking_part1_sports:["Do you play any sports?","What's your favorite sport to watch?","Did you play sports as a child?","How often do you exercise?","Would you like to learn a new sport?"],speaking_part1_home:["Where do you live?","Do you live in a house or an apartment?","What's your favorite room in your home?","Would you like to move to a different home?","What do you like about where you live?"],speaking_part1_weather:["What's the weather like in your country?","What's your favorite season?","Do you prefer hot or cold weather?","What do you usually do when it rains?","Has the weather changed much in your country recently?"],speaking_part1_food:["What's your favorite food?","Do you like cooking?","What kind of food do you usually eat?","Do you prefer eating at home or in restaurants?","Have your eating habits changed over the years?"],speaking_part1_transportation:["How do you usually get around your city?","What is your favorite mode of transportation?","How has transportation changed in your area over the years?","Do you think public transportation is efficient in your city?","Would you like to learn how to drive?"],speaking_part1_entertainment:["What do you do for entertainment?","Do you prefer watching movies at home or in the cinema?","What kind of music do you like?","Have your entertainment preferences changed over time?","What was the last concert you attended?"],speaking_part1_travel:["Do you like traveling?","What is your favorite travel destination?","Do you prefer traveling alone or with others?","What is the most interesting place you have visited?","What do you like to do when you travel?"],speaking_part1_technology:["How often do you use technology in your daily life?","What is your favorite gadget?","How has technology changed the way you communicate?","Do you think technology has made life easier or more complicated?","What new technology would you like to learn about?"],speaking_part1_books:["Do you like reading books?","What is your favorite book?","Do you prefer e-books or printed books?","How often do you read?","What book would you recommend to others?"],speaking_part1_health:["How do you stay healthy?","What is your favorite type of exercise?","Do you think you have a healthy lifestyle?","How often do you visit the doctor?","What do you do to relax and unwind?"],speaking_part1_fashion:["Do you care about fashion?","What is your favorite clothing brand?","How often do you go shopping for clothes?","Do you prefer casual or formal wear?","Has your fashion sense changed over the years?"],speaking_part1_animals:["Do you like animals?","Do you have any pets?","What is your favorite animal?","Have you ever been to a zoo?","Would you like to have a pet in the future?"],speaking_part1_environment:["What do you do to help the environment?","Do you think recycling is important?","What are some environmental problems in your area?","How can people be encouraged to protect the environment?","What is your opinion on climate change?"],speaking_part1_festivals:["What is your favorite festival?","How do you celebrate it?","What festivals are popular in your country?","Have you ever participated in a festival abroad?","What do you like most about festivals?"],speaking_part1_music:["What kind of music do you like?","Who is your favorite singer or band?","Do you play any musical instruments?","Have you ever been to a concert?","How does music affect your mood?"],speaking_part1_art:["Do you like art?","What is your favorite type of art?","Have you ever visited an art gallery?","Can you draw or paint?","How important is art in your culture?"],speaking_part1_cooking:["Do you like cooking?","What is your favorite dish to cook?","Who taught you how to cook?","Do you prefer cooking at home or eating out?","What is a traditional dish from your country?"],speaking_part1_friends:["Do you have many friends?","What do you usually do with your friends?","How do you make new friends?","What qualities do you value in a friend?","Have you ever had a falling out with a friend?"],speaking_part1_weekends:["What do you usually do on weekends?","Do you prefer relaxing or being active on weekends?","How do you spend time with your family on weekends?","What was the best weekend you ever had?","Do you have any weekend traditions?"],speaking_part1_holidays:["What is your favorite holiday?","How do you celebrate it?","Do you prefer traveling or staying home during holidays?","What holiday traditions does your family have?","What was the most memorable holiday you had?"],speaking_part1_seasons:["What is your favorite season?","How does the weather affect your activities?","Do you prefer hot or cold weather?","What do you like to do in the summer?","What do you like to do in the winter?"],speaking_part1_technology:["How has technology changed the way you work?","What is your favorite gadget?","Do you think technology has made life easier or more complicated?","What new technology would you like to learn about?","How often do you use social media?"],speaking_part1_environment:["What do you do to help the environment?","Do you think recycling is important?","What are some environmental problems in your area?","How can people be encouraged to protect the environment?","What is your opinion on climate change?"],speaking_part1_festivals:["What is your favorite festival?","How do you celebrate it?","What festivals are popular in your country?","Have you ever participated in a festival abroad?","What do you like most about festivals?"]}).map(([e,t])=>({id:e,titleVi:"Phần 1 - "+e.split("_").pop()?.charAt(0).toUpperCase()+e.split("_").pop()?.slice(1),titleEn:"Part 1 - "+e.split("_").pop()?.charAt(0).toUpperCase()+e.split("_").pop()?.slice(1),descriptionVi:"Luyện tập trả lời c\xe1c c\xe2u hỏi về chủ đề quen thuộc",descriptionEn:"Practice answering questions about familiar topics",taskType:"speaking_part1",level:"B1",targetBand:"5.0-6.0",criteria:["Self-introduction","Description","Daily Life"],questions:t})),...Object.entries({speaking_part2_important_person:{topic:"Describe an important person in your life",questions:["Who this person is","How long you have known them","What they do","Why they are important to you"],followUp:["What qualities do you admire about them?","How have they influenced your life?","Would you like to be like them? Why/Why not?"]},speaking_part2_role_model:{topic:"Describe someone who has inspired you",questions:["Who this person is","What they have achieved","How they inspired you","Why you find them inspiring"],followUp:["What impact have they had on your life?","What qualities make someone inspiring?","Do you think role models are important? Why/Why not?"]},speaking_part2_favorite_animal:{topic:"Describe your favorite animal",questions:["What the animal is","Why you like it","What characteristics it has","What you can learn from it","What you like most about it"],followUp:["Do you have a pet? If so, what is it?","What would you name your favorite animal?","Do you think animals are important? Why/Why not?","Would you like to have a pet in the future?"]},speaking_part2_favorite_subject:{topic:"Describe your favorite subject in school",questions:["What the subject is","Why you enjoy it","What you like most about it","What you can learn from it","What you like most about learning it"],followUp:["Do you think you will use it in the future?","How does it compare to other subjects?","What is the best part about learning it?","Do you have a favorite teacher for this subject?"]},speaking_part2_favorite_sport:{topic:"Describe your favorite sport",questions:["What the sport is","Why you enjoy it","What you like most about it","What you can learn from it","What you like most about playing it"],followUp:["Do you play it? If so, how often?","What is the best part about playing it?","Do you think sports are important? Why/Why not?","Would you like to watch a professional game of it?"]},speaking_part2_favorite_music_genre:{topic:"Describe your favorite music genre",questions:["What the genre is","Why you like it","Who your favorite artists are","What songs do you enjoy from this genre"],followUp:["How does it compare to other genres?","Would you go to a concert of this genre?","What memories do you associate with this music?"]},speaking_part2_favorite_app:{topic:"Describe your favorite mobile app",questions:["What the app is","How you use it","Why you like it","What features you find most useful"],followUp:["How has it changed the way you do things?","Would you recommend it to others? Why/Why not?","What would you improve about it?"]},speaking_part2_influential_book:{topic:"Describe a book that has influenced you",questions:["What the book is about","How it influenced your thoughts or actions","What you learned from it","Why you recommend it to others"],followUp:["How many times have you read it?","What other books do you enjoy?","What makes a book influential?"]},speaking_part2_favorite_hobby_as_child:{topic:"Describe a hobby you enjoyed as a child",questions:["What the hobby was","How you got into it","Why you enjoyed it","If you still do it today"],followUp:["How did it shape who you are now?","Would you encourage children to pursue hobbies?","What hobbies do you have now?"]},speaking_part2_favorite_tradition:{topic:"Describe a tradition in your family",questions:["What the tradition is","How it started","Why it is important to your family","How it is celebrated"],followUp:["Would you like to pass it on to future generations?","What traditions do you find interesting in other cultures?","How do traditions affect family bonds?"]},speaking_part2_favorite_place_in_nature:{topic:"Describe a place in nature you enjoy",questions:["What the place is","How often you visit","Why you enjoy it","How it makes you feel"],followUp:["How does it compare to other natural places?","Would you take friends there? Why/Why not?","What do you do when you go there?"]},speaking_part2_favorite_type_of_restaurant:{topic:"Describe your favorite type of restaurant",questions:["What type of food it serves","How often you eat there","Why you like it","What your favorite dish is"],followUp:["How does it compare to other types of restaurants?","Would you recommend it to friends? Why/Why not?","What would you improve about the restaurant?"]},speaking_part2_favorite_type_of_vacation:{topic:"Describe your favorite type of vacation",questions:["What type of vacation it is","How often you take it","Why you like it","What your favorite memory is"],followUp:["How does it compare to other types of vacations?","Would you recommend it to others? Why/Why not?","What do you plan to do on your next vacation?"]},speaking_part2_favorite_type_of_sport:{topic:"Describe your favorite type of sport",questions:["What type of sport it is","How often you play or watch it","Why you like it","What your favorite team is"],followUp:["How does it compare to other types of sports?","Would you recommend it to friends? Why/Why not?","What do you plan to do in regards to the sport in the future?"]},speaking_part2_how_you_relax:{topic:"Describe how you relax",questions:["What you do to relax","How often you do it","Why it is important to you","What benefits it has"],followUp:["How does it compare to other relaxation techniques?","Would you recommend it to others? Why/Why not?","What do you think is the most important part of relaxation?"]},speaking_part2_how_you_learn:{topic:"Describe how you learn",questions:["What you do to learn","How often you do it","Why it is important to you","What benefits it has"],followUp:["How does it compare to other learning techniques?","Would you recommend it to others? Why/Why not?","What do you think is the most important part of learning?"]},speaking_part2_how_you_organize:{topic:"Describe how you organize",questions:["What you do to organize","How often you do it","Why it is important to you","What benefits it has"],followUp:["How does it compare to other organizational techniques?","Would you recommend it to others? Why/Why not?","What do you think is the most important part of organization?"]},speaking_part2_how_you_overcome_adversity:{topic:"Describe how you overcome adversity",questions:["What you do to overcome obstacles","How often you face challenges","Why it is important to you","What benefits it has"],followUp:["How does it compare to other ways of overcoming obstacles?","Would you recommend it to others? Why/Why not?","What do you think is the most important part of overcoming adversity?"]},speaking_part2_how_you_manage_your_time:{topic:"Describe how you manage your time",questions:["What you do to manage your time","How often you do it","Why it is important to you","What benefits it has"],followUp:["How does it compare to other time management techniques?","Would you recommend it to others? Why/Why not?","What do you think is the most important part of time management?"]},speaking_part2_how_you_stay_physically_active:{topic:"Describe how you stay physically active",questions:["What you do to stay active","How often you do it","Why it is important to you","What benefits it has"],followUp:["How does it compare to other ways of staying active?","Would you recommend it to others? Why/Why not?","What do you think is the most important part of staying physically active?"]},speaking_part2_global_politics:{topic:"Describe your views on global politics",questions:["What are the key issues in global politics today?","How do global political decisions affect your country?","What role do international organizations play?","What is your opinion on current global leaders?"],followUp:["How does global politics compare to national politics?","Would you recommend involvement in political discussions? Why/Why not?","What do you think is the most important aspect of global politics?"]},speaking_part2_climate_change_solutions:{topic:"Discuss solutions to climate change",questions:["What are effective solutions for climate change?","How can individuals contribute to these solutions?","Why is it important to act now?","What are the challenges in implementing these solutions?"],followUp:["How do these solutions compare to past efforts?","Would you recommend any specific actions? Why/Why not?","What do you think is the key to successful climate action?"]},speaking_part2_artificial_intelligence:{topic:"Describe the impact of artificial intelligence",questions:["What are the benefits of AI?","How is AI changing industries?","Why is ethical AI development important?","What are potential risks of AI?"],followUp:["How does AI compare to other technological advancements?","Would you encourage learning AI technologies? Why/Why not?","What do you think is the most critical aspect of AI development?"]},speaking_part2_international_trade:{topic:"Discuss the effects of international trade",questions:["What are the benefits and drawbacks of international trade?","How does it affect the economy of your country?","Why is trade balance important?","What are current trends in international trade?"],followUp:["How does international trade compare to domestic trade?","Would you advise engaging in international business? Why/Why not?","What do you think is the most significant factor in trade success?"]},speaking_part2_sustainable_energy:{topic:"Describe the importance of sustainable energy",questions:["What are the advantages of sustainable energy?","How can it be implemented effectively?","Why is it crucial for future generations?","What are the obstacles in transitioning to sustainable energy?"],followUp:["How does sustainable energy compare to fossil fuels?","Would you promote sustainable energy initiatives? Why/Why not?","What do you think is the most pressing energy issue today?"]},speaking_part2_healthcare_reform:{topic:"Discuss the need for healthcare reform",questions:["What are the main challenges in healthcare today?","How can healthcare systems be improved?","Why is access to healthcare important?","What are the potential benefits of reform?"],followUp:["How does healthcare reform compare to current systems?","Would you support changes to healthcare policies? Why/Why not?","What do you think is the most critical issue in healthcare?"]},speaking_part2_urbanization_impact:{topic:"Describe the impact of urbanization",questions:["What are the effects of urbanization on society?","How does it influence the environment?","Why is urban planning important?","What are the challenges urban areas face?"],followUp:["How does urbanization compare to rural development?","Would you recommend living in an urban area? Why/Why not?","What do you think is the most significant urban issue?"]},speaking_part2_gender_equality:{topic:"Discuss the importance of gender equality",questions:["What are the benefits of gender equality?","How can it be promoted in society?","Why is it crucial for development?","What challenges are there in achieving equality?"],followUp:["How does gender equality compare to other social issues?","Would you advocate for gender equality initiatives? Why/Why not?","What do you think is the most important step towards equality?"]},speaking_part2_cybersecurity_threats:{topic:"Describe cybersecurity threats",questions:["What are the major cybersecurity threats today?","How can individuals protect themselves?","Why is cybersecurity important?","What are the challenges in maintaining cybersecurity?"],followUp:["How do cybersecurity threats compare to physical threats?","Would you suggest learning about cybersecurity? Why/Why not?","What do you think is the most critical cybersecurity measure?"]},speaking_part2_global_health_issues:{topic:"Discuss global health issues",questions:["What are the most pressing health issues globally?","How can these issues be addressed?","Why is international cooperation important?","What are the obstacles in resolving global health problems?"],followUp:["How do global health issues compare to local health issues?","Would you support global health initiatives? Why/Why not?","What do you think is the most urgent health issue to tackle?"]},speaking_part2_space_exploration:{topic:"Describe the significance of space exploration",questions:["What are the benefits of exploring space?","How does it impact technology?","Why is it important for humanity?","What are the challenges in space exploration?"],followUp:["How does space exploration compare to other scientific fields?","Would you support funding space missions? Why/Why not?","What do you think is the most exciting aspect of space exploration?"]},speaking_part2_human_rights_advocacy:{topic:"Discuss the importance of human rights advocacy",questions:["What are the key human rights issues today?","How can advocacy be effective?","Why is it important to stand up for human rights?","What challenges do advocates face?"],followUp:["How does human rights advocacy compare to other forms of activism?","Would you participate in human rights campaigns? Why/Why not?","What do you think is the most critical human rights issue?"]},speaking_part2_financial_literacy:{topic:"Describe the importance of financial literacy",questions:["What are the benefits of financial literacy?","How can it be improved in society?","Why is it important for individuals?","What challenges do people face in becoming financially literate?"],followUp:["How does financial literacy compare to other educational topics?","Would you recommend financial education initiatives? Why/Why not?","What do you think is the most important financial skill?"]},speaking_part2_digital_transformation:{topic:"Discuss the impact of digital transformation",questions:["What are the effects of digital transformation on businesses?","How does it change consumer behavior?","Why is it important for competitiveness?","What challenges do companies face in digital transformation?"],followUp:["How does digital transformation compare to past technological shifts?","Would you invest in digital transformation strategies? Why/Why not?","What do you think is the most significant impact of digital transformation?"]},speaking_part2_mental_health_awareness:{topic:"Describe the importance of mental health awareness",questions:["What are the benefits of raising mental health awareness?","How can it be promoted effectively?","Why is it crucial for society?","What challenges exist in addressing mental health issues?"],followUp:["How does mental health awareness compare to physical health awareness?","Would you support mental health initiatives? Why/Why not?","What do you think is the most critical mental health issue?"]},speaking_part2_cultural_preservation:{topic:"Discuss the importance of cultural preservation",questions:["What are the benefits of preserving culture?","How can cultural heritage be protected?","Why is it important for identity?","What are the challenges in cultural preservation?"],followUp:["How does cultural preservation compare to cultural change?","Would you recommend supporting cultural initiatives? Why/Why not?","What do you think is the most significant cultural heritage?"]},speaking_part2_renewable_resources:{topic:"Describe the importance of using renewable resources",questions:["What are the advantages of renewable resources?","How can they be implemented effectively?","Why are they crucial for sustainability?","What challenges exist in adopting renewable resources?"],followUp:["How do renewable resources compare to non-renewable ones?","Would you promote renewable resource usage? Why/Why not?","What do you think is the most promising renewable resource?"]},speaking_part2_social_entrepreneurship:{topic:"Discuss the impact of social entrepreneurship",questions:["What are the benefits of social entrepreneurship?","How does it address societal issues?","Why is it important for community development?","What challenges do social entrepreneurs face?"],followUp:["How does social entrepreneurship compare to traditional business models?","Would you invest in social enterprises? Why/Why not?","What do you think is the most impactful social enterprise?"]},speaking_part2_art_and_society:{topic:"Describe the relationship between art and society",questions:["What role does art play in society?","How does it reflect cultural values?","Why is artistic expression important?","What challenges do artists face today?"],followUp:["How does art compare to other forms of cultural expression?","Would you support public art projects? Why/Why not?","What do you think is the most influential art movement?"]},speaking_part2_digital_privacy:{topic:"Discuss the importance of digital privacy",questions:["What are the major concerns regarding digital privacy?","How can individuals protect their privacy online?","Why is privacy important in the digital age?","What challenges exist in ensuring digital privacy?"],followUp:["How does digital privacy compare to traditional privacy?","Would you advocate for stronger privacy regulations? Why/Why not?","What do you think is the most significant digital privacy issue?"]}}).map(([e,t])=>({id:e,titleVi:"Phần 2 - "+t.topic,titleEn:"Part 2 - "+t.topic,descriptionVi:"Luyện tập n\xf3i d\xe0i với thẻ gợi \xfd",descriptionEn:"Long turn speaking practice with cue card",taskType:"speaking_part2",level:"B2",targetBand:"6.0-7.0",criteria:["Description","Organization","Fluency"],topic:t})),...Object.entries({speaking_part3_education_system:["What are the main problems with the education system in your country?","How has education changed in the last 20 years?","What role should technology play in education?","Do you think traditional teaching methods are still effective?","How can schools better prepare students for the future?"],speaking_part3_online_learning:["What are the advantages and disadvantages of online learning?","Do you think online education will replace traditional classrooms?","How has technology changed the way people learn?","What skills are important for successful online learning?","How can online education be improved?"],speaking_part3_technology_impact:["How has technology changed the way people work?","What are the negative effects of technology on society?","Do you think people rely too much on technology?","How might technology affect employment in the future?","What can be done to protect privacy in the digital age?"],speaking_part3_environmental_issues:["What are the main environmental problems in your country?","How can individuals help protect the environment?","Do you think governments are doing enough to address climate change?","What role should businesses play in environmental protection?","How might environmental problems affect future generations?"],speaking_part3_social_media:["How has social media changed the way we communicate?","What are the positive and negative effects of social media?","Do you think social media influences public opinion?","How can social media be used for educational purposes?","What measures can be taken to protect privacy on social media?"],speaking_part3_climate_change:["What are the main causes of climate change?","How does climate change affect your country?","What can individuals do to combat climate change?","Do you think governments are doing enough to address climate change?","What role do businesses play in climate change mitigation?"],speaking_part3_artificial_intelligence:["How is artificial intelligence changing the job market?","What are the ethical considerations of AI development?","Do you think AI will surpass human intelligence?","How can AI be used to improve healthcare?","What are the potential risks of AI?"],speaking_part3_globalization:["How has globalization affected your country?","What are the benefits and drawbacks of globalization?","Do you think globalization is inevitable?","How does globalization influence cultural exchange?","What impact does globalization have on local businesses?"],speaking_part3_renewable_energy:["What are the advantages of renewable energy sources?","How can governments promote the use of renewable energy?","Do you think renewable energy can replace fossil fuels?","What are the challenges of implementing renewable energy?","How does renewable energy impact the environment?"],speaking_part3_education_reform:["What changes would you like to see in the education system?","How can technology improve education?","What role should teachers play in modern education?","Do you think exams are an effective way to assess students?","How can education be made more accessible to all?"],speaking_part3_mental_health:["Why is mental health important?","How can society reduce the stigma around mental health issues?","What are the signs of good mental health?","How can individuals maintain their mental health?","What role does the government play in mental health care?"],speaking_part3_space_exploration:["What are the benefits of space exploration?","Do you think humans will live on other planets in the future?","How does space exploration impact scientific research?","What are the challenges of space travel?","How can space exploration benefit the economy?"],speaking_part3_technology_innovation:["What are some recent technological innovations?","How do technological advancements affect society?","Do you think technology is advancing too quickly?","How can innovation be encouraged in the tech industry?","What are the ethical implications of new technologies?"],speaking_part3_economic_inequality:["What are the causes of economic inequality?","How does economic inequality affect society?","What measures can be taken to reduce economic inequality?","Do you think wealth should be redistributed?","How can education help reduce economic inequality?"],speaking_part3_healthcare_reform:["What changes would you like to see in the healthcare system?","How can technology improve healthcare?","What role should governments play in healthcare?","Do you think healthcare should be free?","What measures can be taken to reduce healthcare costs?"],speaking_part3_space_colonization:["What are the benefits of colonizing other planets?","Do you think humans will colonize other planets?","How does space colonization impact the economy?","What are the challenges of space colonization?","How can space colonization help humanity?"],speaking_part3_artificial_intelligence_ethics:["What are the ethical implications of AI development?","How can AI be used to benefit society?","Do you think AI should be regulated?","What are the potential risks of AI?","How can AI be used to improve education?"],speaking_part3_climate_change_impacts:["What are the main impacts of climate change?","How does climate change affect different regions?","What can individuals do to combat climate change?","Do you think governments are doing enough to address climate change?","What role do businesses play in climate change mitigation?"],speaking_part3_social_media_impact:["How has social media changed the way we communicate?","What are the positive and negative effects of social media?","Do you think social media influences public opinion?","How can social media be used for educational purposes?","What measures can be taken to protect privacy on social media?"]}).map(([e,t])=>({id:e,titleVi:"Phần 3 - "+e.split("_").pop()?.charAt(0).toUpperCase()+e.split("_").pop()?.slice(1),titleEn:"Part 3 - "+e.split("_").pop()?.charAt(0).toUpperCase()+e.split("_").pop()?.slice(1),descriptionVi:"Thảo luận về c\xe1c \xfd tưởng trừu tượng v\xe0 chủ đề phức tạp",descriptionEn:"Discussion of abstract ideas and complex topics",taskType:"speaking_part3",level:"C1",targetBand:"7.0-8.0",criteria:["Analysis","Opinion","Solutions"],questions:t})),...Object.entries({speaking_advanced_debate:{topics:["The Impact of Social Media on Democracy","Universal Basic Income","Artificial Intelligence Ethics","Climate Change Solutions","Future of Work","Space Exploration Prospects","Renewable Energy Adoption","Education System Overhaul","Mental Health Awareness","Economic Inequality Challenges","Cultural Heritage Preservation","Globalization Effects","Healthcare System Improvements","Technological Innovation and Society","Privacy in the Digital Age","Global Trade Dynamics","Sustainable Urban Development","Food Security Concerns","Water Resource Management","Biodiversity Conservation","Human Rights Advocacy","International Relations and Diplomacy","Cybersecurity Threats","Artificial Intelligence in Healthcare","Public Transport Efficiency","Financial Literacy Education","Work-Life Balance Strategies","Agricultural Innovations","Tourism Industry Trends","Media Influence on Public Opinion","Youth Empowerment Initiatives","Aging Population Challenges","Disaster Preparedness and Response","Corporate Social Responsibility","Digital Divide Solutions","Renewable Energy Technologies","Space Tourism Possibilities","Blockchain Technology Applications","Virtual Reality in Education","Gender Equality Movements","Animal Welfare Policies","Cultural Exchange Programs","Urbanization and Its Impact","Nuclear Energy Debate","Artificial Intelligence in Art","Climate Change Adaptation","Renewable Energy Investments","Global Health Initiatives","Online Learning Platforms","Smart City Developments","Crisis Management Strategies","Environmental Sustainability","Immigration Policy Debates","Cryptocurrency Impact","Robotics and Automation","Biotechnology Breakthroughs","Social Media Regulation","Global Economic Trends","Artificial Intelligence in Law Enforcement","Cybersecurity Governance","Healthcare Innovation","Virtual Reality in Healthcare","Sustainable Agriculture","Transportation Infrastructure Development","Education Technology Advancements","Disaster Risk Reduction","Corporate Governance","Data Privacy and Protection","Global Food Security","Renewable Energy Grid Integration","Climate Change Mitigation Strategies","Digital Literacy Education","Robotics and Artificial Intelligence in Manufacturing","Biotechnology in Medicine","Cybersecurity and Critical Infrastructure","Online Learning Personalization","Smart City Infrastructure","Financial Inclusion Initiatives","Global Supply Chain Management","Artificial Intelligence in Education","Virtual Reality in Training","Immigration and Border Control","Cryptocurrency Regulation","Robotics and Automation in Industry","Biotechnology in Agriculture","Social Media Impact on Society","Global Economic Development","Artificial Intelligence in Cybersecurity","Cybersecurity Compliance","Healthcare Innovation and Technology","Virtual Reality in Entertainment","Sustainable Resource Management","Transportation Infrastructure Financing","Education Technology Innovation","Disaster Risk Reduction and Management","Corporate Social Responsibility and Sustainability","Data Protection and Privacy","Global Food Production and Distribution","Renewable Energy Policy and Regulation","Climate Change Adaptation and Resilience","Digital Literacy and Skills Training","Robotics and Artificial Intelligence in Healthcare","Biotechnology in Renewable Energy","Cybersecurity and Cybercrime","Online Learning Accessibility","Smart City Sustainability"],format:{preparation:"2 minutes",speaking:"4 minutes",discussion:"5 minutes"},criteria:["Argument Development","Critical Analysis","Evidence Use","Rebuttal Skills"]},speaking_advanced_case_study:{topics:["A Company's Response to a Crisis","A Successful Business Strategy","A Social Media Campaign","A Product Launch","A Change Management Process","A Marketing Campaign","A New Business Venture","A Public Relations Crisis","A Product Recall","A Merger or Acquisition","A Rebranding Effort","A Sustainability Initiative","A Diversity and Inclusion Program","A Talent Management Strategy","A Supply Chain Optimization","A Digital Transformation","A Cloud Computing Adoption","A Cybersecurity Breach","A Disaster Recovery Plan","A Business Continuity Plan","A Risk Management Strategy"],format:{preparation:"5 minutes",speaking:"10 minutes",discussion:"10 minutes"},criteria:["Analytical Thinking","Problem Solving","Communication Skills","Business Acumen"]},speaking_advanced_problem_solving:{topics:["A Supply Chain Disruption","A Cybersecurity Threat","A Public Health Crisis","A Natural Disaster","A Financial Crisis","A Regulatory Change","A Shift in Consumer Behavior","A Technological Advancement","A Change in Global Economic Trends","A Shift in Global Power Dynamics","A Pandemic","A Climate Change Related Event","A Geopolitical Crisis","A Refugee Crisis","A Humanitarian Crisis","A Global Health Threat","A Food Security Crisis","A Water Security Crisis","A Global Economic Downturn","A Global Financial Crisis","A Global Trade War"],format:{preparation:"5 minutes",speaking:"10 minutes",discussion:"10 minutes"},criteria:["Critical Thinking","Creative Problem Solving","Decision Making","Collaboration and Communication"]},speaking_advanced_data_analysis:{topics:["Analyze a Company's Financial Statement","Analyze a Company's Marketing Strategy","Analyze a Company's Human Resources Management","Analyze a Company's Operations Management","Analyze a Company's Supply Chain Management","Analyze a Company's Information Technology Management","Analyze a Company's Financial Performance","Analyze a Company's Competitor Analysis","Analyze a Company's Market Research","Analyze a Company's Product Development","Analyze a Company's Brand Management","Analyze a Company's Digital Marketing Strategy","Analyze a Company's Social Media Strategy","Analyze a Company's Public Relations Strategy","Analyze a Company's Crisis Management Strategy","Analyze a Company's Sustainability Strategy","Analyze a Company's Corporate Social Responsibility Strategy","Analyze a Company's Diversity and Inclusion Strategy","Analyze a Company's Talent Management Strategy","Analyze a Company's Global Strategy","Analyze a Company's Competitive Advantage"],format:{preparation:"5 minutes",speaking:"10 minutes",discussion:"10 minutes"},criteria:["Data Analysis","Data Interpretation","Data Visualization","Communication Skills"]}}).map(([e,t])=>({id:e,titleVi:"N\xe2ng cao - "+e.split("_").pop()?.charAt(0).toUpperCase()+e.split("_").pop()?.slice(1),titleEn:"Advanced - "+e.split("_").pop()?.charAt(0).toUpperCase()+e.split("_").pop()?.slice(1),descriptionVi:"Thảo luận về c\xe1c chủ đề phức tạp cho luyện tập n\xe2ng cao",descriptionEn:"Complex discussion topics for high-level practice",taskType:"speaking_advanced",level:"C1",targetBand:"7.0-8.5",criteria:["Critical Thinking","Argumentation","Analysis"],topic:t}))];var eu=a(1409),eh=a(6009),ed=a(4075),ep=a(521),em=a(4198),eg=a(3422);function ey(e,t){let a=+(0,eg.a)(e)-+(0,eg.a)(t);return a<0?-1:a>0?1:a}var ef=a(3070);function ev(e,t){return function(e,t,a){var o,i,n,s;let r;let l=(0,ed.q)(),c=a?.locale??l.locale??eh.c,u=ey(e,t);if(isNaN(u))throw RangeError("Invalid time value");let h=Object.assign({},a,{addSuffix:a?.addSuffix,comparison:u}),[d,p]=(0,em.x)(a?.in,...u>0?[t,e]:[e,t]),m=(o=p,i=d,(s=void 0,e=>{let t=(s?Math[s]:Math.trunc)(e);return 0===t?0:t})((+(0,eg.a)(o)-+(0,eg.a)(i))/1e3)),g=Math.round((m-((0,ep.G)(p)-(0,ep.G)(d))/1e3)/60);if(g<2){if(a?.includeSeconds){if(m<5)return c.formatDistance("lessThanXSeconds",5,h);if(m<10)return c.formatDistance("lessThanXSeconds",10,h);if(m<20)return c.formatDistance("lessThanXSeconds",20,h);if(m<40)return c.formatDistance("halfAMinute",0,h);else if(m<60)return c.formatDistance("lessThanXMinutes",1,h);else return c.formatDistance("xMinutes",1,h)}return 0===g?c.formatDistance("lessThanXMinutes",1,h):c.formatDistance("xMinutes",g,h)}if(g<45)return c.formatDistance("xMinutes",g,h);if(g<90)return c.formatDistance("aboutXHours",1,h);if(g<ef.F6){let e=Math.round(g/60);return c.formatDistance("aboutXHours",e,h)}if(g<2520)return c.formatDistance("xDays",1,h);if(g<ef.Nw){let e=Math.round(g/ef.F6);return c.formatDistance("xDays",e,h)}if(g<2*ef.Nw)return r=Math.round(g/ef.Nw),c.formatDistance("aboutXMonths",r,h);if((r=function(e,t,a){let[o,i,n]=(0,em.x)(void 0,e,e,t),s=ey(i,n),r=Math.abs(function(e,t,a){let[o,i]=(0,em.x)(void 0,e,t);return 12*(o.getFullYear()-i.getFullYear())+(o.getMonth()-i.getMonth())}(i,n));if(r<1)return 0;1===i.getMonth()&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-s*r);let l=ey(i,n)===-s;(function(e,t){let a=(0,eg.a)(e,void 0);return+function(e,t){let a=(0,eg.a)(e,t?.in);return a.setHours(23,59,59,999),a}(a,void 0)==+function(e,t){let a=(0,eg.a)(e,t?.in),o=a.getMonth();return a.setFullYear(a.getFullYear(),o+1,0),a.setHours(23,59,59,999),a}(a,void 0)})(o)&&1===r&&1===ey(o,n)&&(l=!1);let c=s*(r-+l);return 0===c?0:c}(p,d))<12){let e=Math.round(g/ef.Nw);return c.formatDistance("xMonths",e,h)}{let e=r%12,t=Math.trunc(r/12);return e<3?c.formatDistance("aboutXYears",t,h):e<9?c.formatDistance("overXYears",t,h):c.formatDistance("almostXYears",t+1,h)}}(e,(0,eu.w)(e,Date.now()),t)}let eb={lessThanXSeconds:{one:"dưới 1 gi\xe2y",other:"dưới {{count}} gi\xe2y"},xSeconds:{one:"1 gi\xe2y",other:"{{count}} gi\xe2y"},halfAMinute:"nửa ph\xfat",lessThanXMinutes:{one:"dưới 1 ph\xfat",other:"dưới {{count}} ph\xfat"},xMinutes:{one:"1 ph\xfat",other:"{{count}} ph\xfat"},aboutXHours:{one:"khoảng 1 giờ",other:"khoảng {{count}} giờ"},xHours:{one:"1 giờ",other:"{{count}} giờ"},xDays:{one:"1 ng\xe0y",other:"{{count}} ng\xe0y"},aboutXWeeks:{one:"khoảng 1 tuần",other:"khoảng {{count}} tuần"},xWeeks:{one:"1 tuần",other:"{{count}} tuần"},aboutXMonths:{one:"khoảng 1 th\xe1ng",other:"khoảng {{count}} th\xe1ng"},xMonths:{one:"1 th\xe1ng",other:"{{count}} th\xe1ng"},aboutXYears:{one:"khoảng 1 năm",other:"khoảng {{count}} năm"},xYears:{one:"1 năm",other:"{{count}} năm"},overXYears:{one:"hơn 1 năm",other:"hơn {{count}} năm"},almostXYears:{one:"gần 1 năm",other:"gần {{count}} năm"}};var ew=a(582);let ex={date:(0,ew.k)({formats:{full:"EEEE, 'ng\xe0y' d MMMM 'năm' y",long:"'ng\xe0y' d MMMM 'năm' y",medium:"d MMM 'năm' y",short:"dd/MM/y"},defaultWidth:"full"}),time:(0,ew.k)({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:(0,ew.k)({formats:{full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})},e_={lastWeek:"eeee 'tuần trước v\xe0o l\xfac' p",yesterday:"'h\xf4m qua v\xe0o l\xfac' p",today:"'h\xf4m nay v\xe0o l\xfac' p",tomorrow:"'ng\xe0y mai v\xe0o l\xfac' p",nextWeek:"eeee 'tới v\xe0o l\xfac' p",other:"P"};var eW=a(1612);let ek={ordinalNumber:(e,t)=>{let a=Number(e),o=t?.unit;if("quarter"===o)switch(a){case 1:return"I";case 2:return"II";case 3:return"III";case 4:return"IV"}else if("day"===o)switch(a){case 1:return"thứ 2";case 2:return"thứ 3";case 3:return"thứ 4";case 4:return"thứ 5";case 5:return"thứ 6";case 6:return"thứ 7";case 7:return"chủ nhật"}else if("week"===o)return 1===a?"thứ nhất":"thứ "+a;else if("dayOfYear"===o)return 1===a?"đầu ti\xean":"thứ "+a;return String(a)},era:(0,eW.o)({values:{narrow:["TCN","SCN"],abbreviated:["trước CN","sau CN"],wide:["trước C\xf4ng Nguy\xean","sau C\xf4ng Nguy\xean"]},defaultWidth:"wide"}),quarter:(0,eW.o)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["Qu\xfd 1","Qu\xfd 2","Qu\xfd 3","Qu\xfd 4"]},defaultWidth:"wide",formattingValues:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["qu\xfd I","qu\xfd II","qu\xfd III","qu\xfd IV"]},defaultFormattingWidth:"wide",argumentCallback:e=>e-1}),month:(0,eW.o)({values:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["Thg 1","Thg 2","Thg 3","Thg 4","Thg 5","Thg 6","Thg 7","Thg 8","Thg 9","Thg 10","Thg 11","Thg 12"],wide:["Th\xe1ng Một","Th\xe1ng Hai","Th\xe1ng Ba","Th\xe1ng Tư","Th\xe1ng Năm","Th\xe1ng S\xe1u","Th\xe1ng Bảy","Th\xe1ng T\xe1m","Th\xe1ng Ch\xedn","Th\xe1ng Mười","Th\xe1ng Mười Một","Th\xe1ng Mười Hai"]},defaultWidth:"wide",formattingValues:{narrow:["01","02","03","04","05","06","07","08","09","10","11","12"],abbreviated:["thg 1","thg 2","thg 3","thg 4","thg 5","thg 6","thg 7","thg 8","thg 9","thg 10","thg 11","thg 12"],wide:["th\xe1ng 01","th\xe1ng 02","th\xe1ng 03","th\xe1ng 04","th\xe1ng 05","th\xe1ng 06","th\xe1ng 07","th\xe1ng 08","th\xe1ng 09","th\xe1ng 10","th\xe1ng 11","th\xe1ng 12"]},defaultFormattingWidth:"wide"}),day:(0,eW.o)({values:{narrow:["CN","T2","T3","T4","T5","T6","T7"],short:["CN","Th 2","Th 3","Th 4","Th 5","Th 6","Th 7"],abbreviated:["CN","Thứ 2","Thứ 3","Thứ 4","Thứ 5","Thứ 6","Thứ 7"],wide:["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ S\xe1u","Thứ Bảy"]},defaultWidth:"wide"}),dayPeriod:(0,eW.o)({values:{narrow:{am:"am",pm:"pm",midnight:"nửa đ\xeam",noon:"tr",morning:"sg",afternoon:"ch",evening:"tối",night:"đ\xeam"},abbreviated:{am:"AM",pm:"PM",midnight:"nửa đ\xeam",noon:"trưa",morning:"s\xe1ng",afternoon:"chiều",evening:"tối",night:"đ\xeam"},wide:{am:"SA",pm:"CH",midnight:"nửa đ\xeam",noon:"trưa",morning:"s\xe1ng",afternoon:"chiều",evening:"tối",night:"đ\xeam"}},defaultWidth:"wide",formattingValues:{narrow:{am:"am",pm:"pm",midnight:"nửa đ\xeam",noon:"tr",morning:"sg",afternoon:"ch",evening:"tối",night:"đ\xeam"},abbreviated:{am:"AM",pm:"PM",midnight:"nửa đ\xeam",noon:"trưa",morning:"s\xe1ng",afternoon:"chiều",evening:"tối",night:"đ\xeam"},wide:{am:"SA",pm:"CH",midnight:"nửa đ\xeam",noon:"giữa trưa",morning:"v\xe0o buổi s\xe1ng",afternoon:"v\xe0o buổi chiều",evening:"v\xe0o buổi tối",night:"v\xe0o ban đ\xeam"}},defaultFormattingWidth:"wide"})};var ej=a(4682);let eD={code:"vi",formatDistance:(e,t,a)=>{let o;let i=eb[e];return(o="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",String(t)),a?.addSuffix)?a.comparison&&a.comparison>0?o+" nữa":o+" trước":o},formatLong:ex,formatRelative:(e,t,a,o)=>e_[e],localize:ek,match:{ordinalNumber:(0,a(6054).K)({matchPattern:/^(\d+)/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:(0,ej.A)({matchPatterns:{narrow:/^(tcn|scn)/i,abbreviated:/^(trước CN|sau CN)/i,wide:/^(trước Công Nguyên|sau Công Nguyên)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^t/i,/^s/i]},defaultParseWidth:"any"}),quarter:(0,ej.A)({matchPatterns:{narrow:/^([1234]|i{1,3}v?)/i,abbreviated:/^q([1234]|i{1,3}v?)/i,wide:/^quý ([1234]|i{1,3}v?)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/(1|i)$/i,/(2|ii)$/i,/(3|iii)$/i,/(4|iv)$/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:(0,ej.A)({matchPatterns:{narrow:/^(0?[2-9]|10|11|12|0?1)/i,abbreviated:/^thg[ _]?(0?[1-9](?!\d)|10|11|12)/i,wide:/^tháng ?(Một|Hai|Ba|Tư|Năm|Sáu|Bảy|Tám|Chín|Mười|Mười ?Một|Mười ?Hai|0?[1-9](?!\d)|10|11|12)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/0?1$/i,/0?2/i,/3/,/4/,/5/,/6/,/7/,/8/,/9/,/10/,/11/,/12/],abbreviated:[/^thg[ _]?0?1(?!\d)/i,/^thg[ _]?0?2/i,/^thg[ _]?0?3/i,/^thg[ _]?0?4/i,/^thg[ _]?0?5/i,/^thg[ _]?0?6/i,/^thg[ _]?0?7/i,/^thg[ _]?0?8/i,/^thg[ _]?0?9/i,/^thg[ _]?10/i,/^thg[ _]?11/i,/^thg[ _]?12/i],wide:[/^tháng ?(Một|0?1(?!\d))/i,/^tháng ?(Hai|0?2)/i,/^tháng ?(Ba|0?3)/i,/^tháng ?(Tư|0?4)/i,/^tháng ?(Năm|0?5)/i,/^tháng ?(Sáu|0?6)/i,/^tháng ?(Bảy|0?7)/i,/^tháng ?(Tám|0?8)/i,/^tháng ?(Chín|0?9)/i,/^tháng ?(Mười|10)/i,/^tháng ?(Mười ?Một|11)/i,/^tháng ?(Mười ?Hai|12)/i]},defaultParseWidth:"wide"}),day:(0,ej.A)({matchPatterns:{narrow:/^(CN|T2|T3|T4|T5|T6|T7)/i,short:/^(CN|Th ?2|Th ?3|Th ?4|Th ?5|Th ?6|Th ?7)/i,abbreviated:/^(CN|Th ?2|Th ?3|Th ?4|Th ?5|Th ?6|Th ?7)/i,wide:/^(Chủ ?Nhật|Chúa ?Nhật|thứ ?Hai|thứ ?Ba|thứ ?Tư|thứ ?Năm|thứ ?Sáu|thứ ?Bảy)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/CN/i,/2/i,/3/i,/4/i,/5/i,/6/i,/7/i],short:[/CN/i,/2/i,/3/i,/4/i,/5/i,/6/i,/7/i],abbreviated:[/CN/i,/2/i,/3/i,/4/i,/5/i,/6/i,/7/i],wide:[/(Chủ|Chúa) ?Nhật/i,/Hai/i,/Ba/i,/Tư/i,/Năm/i,/Sáu/i,/Bảy/i]},defaultParseWidth:"wide"}),dayPeriod:(0,ej.A)({matchPatterns:{narrow:/^(a|p|nửa đêm|trưa|(giờ) (sáng|chiều|tối|đêm))/i,abbreviated:/^(am|pm|nửa đêm|trưa|(giờ) (sáng|chiều|tối|đêm))/i,wide:/^(ch[^i]*|sa|nửa đêm|trưa|(giờ) (sáng|chiều|tối|đêm))/i},defaultMatchWidth:"wide",parsePatterns:{any:{am:/^(a|sa)/i,pm:/^(p|ch[^i]*)/i,midnight:/nửa đêm/i,noon:/trưa/i,morning:/sáng/i,afternoon:/chiều/i,evening:/tối/i,night:/^đêm/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:1}};var eS=a(9905);function eN({userId:e,onSessionSelect:t,currentSessionId:a}){let[n,s]=(0,i.useState)(null),[r,l]=(0,i.useState)([]);return(0,o.jsxs)("div",{className:"w-full h-full flex flex-col space-y-4",children:[(0,o.jsxs)(Z.Zp,{children:[(0,o.jsx)(Z.aR,{children:(0,o.jsx)(Z.ZB,{children:"Thống k\xea tổng qu\xe1t"})}),(0,o.jsx)(Z.Wu,{children:(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{children:"Tổng số phi\xean:"}),(0,o.jsx)("span",{className:"font-medium",children:n?.stats.totalSessions||0})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{children:"Band trung b\xecnh:"}),(0,o.jsx)("span",{className:"font-medium",children:n?.stats.averageBand.toFixed(1)||"N/A"})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{children:"Thời gian luyện tập:"}),(0,o.jsxs)("span",{className:"font-medium",children:[n?.stats.timeSpent||0," ph\xfat"]})]}),n?.stats.lastSessionDate&&(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("span",{children:"Phi\xean gần nhất:"}),(0,o.jsx)("span",{className:"font-medium",children:ev(n.stats.lastSessionDate,{addSuffix:!0,locale:eD})})]})]})})]}),(0,o.jsxs)(Z.Zp,{className:"flex-1",children:[(0,o.jsx)(Z.aR,{children:(0,o.jsx)(Z.ZB,{children:"Phi\xean gần đ\xe2y"})}),(0,o.jsx)(Z.Wu,{children:(0,o.jsx)("div",{className:"space-y-2",children:r.map(e=>(0,o.jsxs)(K.$,{variant:e.id===a?"secondary":"ghost",className:"w-full justify-between",onClick:()=>t(e),children:[(0,o.jsxs)("div",{className:"flex flex-col items-start",children:[(0,o.jsx)("span",{className:"text-sm font-medium",children:ev(e.startTime,{addSuffix:!0,locale:eD})}),(0,o.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Band: ",e.metrics?.overallBand||"N/A"]})]}),(0,o.jsx)(eS.A,{className:"h-4 w-4"})]},e.id))})})]})]})}var eC=a(7722),eA=a(1680);let eT=(0,eA.A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var eH=a(7339);function eM({content:e,role:t}){return"user"===t?(0,o.jsx)("div",{className:"flex justify-end",children:(0,o.jsx)("div",{className:"max-w-[80%] p-3 rounded-lg bg-blue-500 text-white",children:e})}):(0,o.jsx)("div",{className:"flex justify-start",children:(0,o.jsx)(Z.Zp,{className:"max-w-[80%] p-4 prose prose-sm dark:prose-invert",children:(0,o.jsx)(eH.o,{children:e})})})}function eI({messages:e,onSendMessage:t,isProcessing:a}){let[n,s]=(0,i.useState)("");return(0,o.jsx)(Z.Zp,{className:"h-full flex flex-col",children:(0,o.jsxs)(Z.Wu,{className:"flex-1 p-4 flex flex-col",children:[(0,o.jsx)("div",{className:"flex-1 overflow-y-auto space-y-4",children:e.map((e,t)=>(0,o.jsx)(eM,{role:e.role,content:e.content},t))}),(0,o.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n.trim()&&!a&&(t(n.trim()),s(""))},className:"mt-4 flex gap-2",children:[(0,o.jsx)(eC.p,{value:n,onChange:e=>s(e.target.value),placeholder:"Nhập c\xe2u hỏi của bạn...",disabled:a}),(0,o.jsx)(K.$,{type:"submit",disabled:a||!n.trim(),children:(0,o.jsx)(eT,{className:"h-4 w-4"})})]})]})})}let eP=(0,eA.A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),eR=(0,eA.A)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),eE=(0,eA.A)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);var eq=a(6582),eF=a(8762),eB="Switch",[ez,eU]=(0,s.A)(eB),[eO,eG]=ez(eB),eL=i.forwardRef((e,t)=>{let{__scopeSwitch:a,name:s,checked:r,defaultChecked:c,required:h,disabled:p,value:m="on",onCheckedChange:g,form:y,...f}=e,[v,b]=i.useState(null),w=(0,l.s)(t,e=>b(e)),x=i.useRef(!1),_=!v||y||!!v.closest("form"),[W=!1,k]=(0,d.i)({prop:r,defaultProp:c,onChange:g});return(0,o.jsxs)(eO,{scope:a,checked:W,disabled:p,children:[(0,o.jsx)(u.sG.button,{type:"button",role:"switch","aria-checked":W,"aria-required":h,"data-state":eX(W),"data-disabled":p?"":void 0,disabled:p,value:m,...f,ref:w,onClick:(0,n.m)(e.onClick,e=>{k(e=>!e),_&&(x.current=e.isPropagationStopped(),x.current||e.stopPropagation())})}),_&&(0,o.jsx)(eQ,{control:v,bubbles:!x.current,name:s,value:m,checked:W,required:h,disabled:p,form:y,style:{transform:"translateX(-100%)"}})]})});eL.displayName=eB;var e$="SwitchThumb",eV=i.forwardRef((e,t)=>{let{__scopeSwitch:a,...i}=e,n=eG(e$,a);return(0,o.jsx)(u.sG.span,{"data-state":eX(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:t})});eV.displayName=e$;var eQ=e=>{let{control:t,checked:a,bubbles:n=!0,...s}=e,r=i.useRef(null),l=(0,eq.Z)(a),c=(0,eF.X)(t);return i.useEffect(()=>{let e=r.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(l!==a&&t){let o=new Event("click",{bubbles:n});t.call(e,a),e.dispatchEvent(o)}},[l,a,n]),(0,o.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...s,tabIndex:-1,ref:r,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function eX(e){return e?"checked":"unchecked"}let eK=i.forwardRef(({className:e,...t},a)=>(0,o.jsx)(eL,{className:(0,$.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:a,children:(0,o.jsx)(eV,{className:(0,$.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));eK.displayName=eL.displayName;var eZ=a(2628);function eY({onAnalysisComplete:e,isProcessing:t=!1,isHandsFree:a=!1,onHandsFreeChange:n}){let[s,r]=(0,i.useState)(!1),[l,c]=(0,i.useState)(null),u=(0,i.useRef)(null),h=(0,i.useRef)([]),d=(0,i.useRef)(null),p=(0,i.useRef)(null),m=(0,i.useRef)(null),g=(0,i.useRef)(null),y=(0,i.useRef)(null),[f,v]=(0,i.useState)(!1),b=async()=>{try{let t=await navigator.mediaDevices.getUserMedia({audio:!0});y.current=t,p.current=new AudioContext,m.current=p.current.createAnalyser(),g.current=p.current.createMediaStreamSource(t),g.current.connect(m.current);let o=new MediaRecorder(t);u.current=o,h.current=[],o.ondataavailable=e=>{e.data.size>0&&h.current.push(e.data)},o.onstop=async()=>{let t=new Blob(h.current,{type:"audio/wav"}),a=URL.createObjectURL(t);c(a),v(!0);try{let a=await en.analyzeAudio(t);e(a)}catch(e){console.error("Error processing audio:",e)}finally{v(!1)}},o.start(),r(!0),a&&x()}catch(e){console.error("Error accessing microphone:",e)}},w=()=>{u.current&&s&&(u.current.stop(),r(!1),y.current&&y.current.getTracks().forEach(e=>e.stop()),g.current&&g.current.disconnect(),p.current&&p.current.close(),d.current&&clearTimeout(d.current))},x=()=>{if(!m.current)return;let e=m.current;e.fftSize=2048;let t=e.frequencyBinCount,a=new Uint8Array(t),o=()=>{e.getByteFrequencyData(a),a.reduce((e,t)=>e+t)/t<5?d.current=setTimeout(()=>{w()},2e3):d.current&&(clearTimeout(d.current),d.current=null),s&&requestAnimationFrame(o)};o()};return(0,o.jsx)(Z.Zp,{className:"p-4",children:(0,o.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)(eK,{id:"hands-free",checked:a,onCheckedChange:n,disabled:s||t||f}),(0,o.jsx)(eZ.J,{htmlFor:"hands-free",children:"Chế độ rảnh tay"})]}),(0,o.jsx)(K.$,{onClick:s?w:b,disabled:t||f,variant:s?"destructive":"default",children:t||f?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eP,{className:"mr-2 h-4 w-4 animate-spin"}),"Đang xử l\xfd..."]}):s?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eR,{className:"mr-2 h-4 w-4"}),"Dừng ghi \xe2m"]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eE,{className:"mr-2 h-4 w-4"}),"Bắt đầu ghi \xe2m"]})})]}),l&&!s&&!t&&!f&&(0,o.jsx)("audio",{src:l,controls:!0,className:"w-full"}),a&&s&&(0,o.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Ghi \xe2m sẽ tự động dừng sau 2 gi\xe2y im lặng"})]})})}var eJ=a(9655),e0=a(1675),e1=a(2534),e2=a(707),e5=a(9632),e3=a(7783),e4=a(2421),e6=a(2705),e9="Dialog",[e8,e7]=(0,s.A)(e9),[te,tt]=e8(e9),ta=e=>{let{__scopeDialog:t,children:a,open:n,defaultOpen:s,onOpenChange:r,modal:l=!0}=e,u=i.useRef(null),h=i.useRef(null),[p=!1,m]=(0,d.i)({prop:n,defaultProp:s,onChange:r});return(0,o.jsx)(te,{scope:t,triggerRef:u,contentRef:h,contentId:(0,c.B)(),titleId:(0,c.B)(),descriptionId:(0,c.B)(),open:p,onOpenChange:m,onOpenToggle:i.useCallback(()=>m(e=>!e),[m]),modal:l,children:a})};ta.displayName=e9;var to="DialogTrigger";i.forwardRef((e,t)=>{let{__scopeDialog:a,...i}=e,s=tt(to,a),r=(0,l.s)(t,s.triggerRef);return(0,o.jsx)(u.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":tx(s.open),...i,ref:r,onClick:(0,n.m)(e.onClick,s.onOpenToggle)})}).displayName=to;var ti="DialogPortal",[tn,ts]=e8(ti,{forceMount:void 0}),tr=e=>{let{__scopeDialog:t,forceMount:a,children:n,container:s}=e,r=tt(ti,t);return(0,o.jsx)(tn,{scope:t,forceMount:a,children:i.Children.map(n,e=>(0,o.jsx)(A.C,{present:a||r.open,children:(0,o.jsx)(e2.Z,{asChild:!0,container:s,children:e})}))})};tr.displayName=ti;var tl="DialogOverlay",tc=i.forwardRef((e,t)=>{let a=ts(tl,e.__scopeDialog),{forceMount:i=a.forceMount,...n}=e,s=tt(tl,e.__scopeDialog);return s.modal?(0,o.jsx)(A.C,{present:i||s.open,children:(0,o.jsx)(tu,{...n,ref:t})}):null});tc.displayName=tl;var tu=i.forwardRef((e,t)=>{let{__scopeDialog:a,...i}=e,n=tt(tl,a);return(0,o.jsx)(e3.A,{as:e6.DX,allowPinchZoom:!0,shards:[n.contentRef],children:(0,o.jsx)(u.sG.div,{"data-state":tx(n.open),...i,ref:t,style:{pointerEvents:"auto",...i.style}})})}),th="DialogContent",td=i.forwardRef((e,t)=>{let a=ts(th,e.__scopeDialog),{forceMount:i=a.forceMount,...n}=e,s=tt(th,e.__scopeDialog);return(0,o.jsx)(A.C,{present:i||s.open,children:s.modal?(0,o.jsx)(tp,{...n,ref:t}):(0,o.jsx)(tm,{...n,ref:t})})});td.displayName=th;var tp=i.forwardRef((e,t)=>{let a=tt(th,e.__scopeDialog),s=i.useRef(null),r=(0,l.s)(t,a.contentRef,s);return i.useEffect(()=>{let e=s.current;if(e)return(0,e4.Eq)(e)},[]),(0,o.jsx)(tg,{...e,ref:r,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,n.m)(e.onCloseAutoFocus,e=>{e.preventDefault(),a.triggerRef.current?.focus()}),onPointerDownOutside:(0,n.m)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey;(2===t.button||a)&&e.preventDefault()}),onFocusOutside:(0,n.m)(e.onFocusOutside,e=>e.preventDefault())})}),tm=i.forwardRef((e,t)=>{let a=tt(th,e.__scopeDialog),n=i.useRef(!1),s=i.useRef(!1);return(0,o.jsx)(tg,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(n.current||a.triggerRef.current?.focus(),t.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(n.current=!0,"pointerdown"!==t.detail.originalEvent.type||(s.current=!0));let o=t.target;a.triggerRef.current?.contains(o)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})}),tg=i.forwardRef((e,t)=>{let{__scopeDialog:a,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:r,...c}=e,u=tt(th,a),h=i.useRef(null),d=(0,l.s)(t,h);return(0,e5.Oh)(),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e1.n,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:r,children:(0,o.jsx)(e0.qW,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":tx(u.open),...c,ref:d,onDismiss:()=>u.onOpenChange(!1)})}),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tj,{titleId:u.titleId}),(0,o.jsx)(tD,{contentRef:h,descriptionId:u.descriptionId})]})]})}),ty="DialogTitle",tf=i.forwardRef((e,t)=>{let{__scopeDialog:a,...i}=e,n=tt(ty,a);return(0,o.jsx)(u.sG.h2,{id:n.titleId,...i,ref:t})});tf.displayName=ty;var tv="DialogDescription",tb=i.forwardRef((e,t)=>{let{__scopeDialog:a,...i}=e,n=tt(tv,a);return(0,o.jsx)(u.sG.p,{id:n.descriptionId,...i,ref:t})});tb.displayName=tv;var tw="DialogClose";function tx(e){return e?"open":"closed"}i.forwardRef((e,t)=>{let{__scopeDialog:a,...i}=e,s=tt(tw,a);return(0,o.jsx)(u.sG.button,{type:"button",...i,ref:t,onClick:(0,n.m)(e.onClick,()=>s.onOpenChange(!1))})}).displayName=tw;var t_="DialogTitleWarning",[tW,tk]=(0,s.q)(t_,{contentName:th,titleName:ty,docsSlug:"dialog"}),tj=({titleId:e})=>{let t=tk(t_),a=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return i.useEffect(()=>{e&&!document.getElementById(e)&&console.error(a)},[a,e]),null},tD=({contentRef:e,descriptionId:t})=>{let a=tk("DialogDescriptionWarning"),o=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${a.contentName}}.`;return i.useEffect(()=>{let a=e.current?.getAttribute("aria-describedby");t&&a&&!document.getElementById(t)&&console.warn(o)},[o,e,t]),null};let tS=i.forwardRef(({className:e,...t},a)=>(0,o.jsx)(tc,{ref:a,className:(0,$.cn)("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));tS.displayName=tc.displayName;let tN=i.forwardRef(({className:e,children:t,...a},i)=>(0,o.jsxs)(tr,{children:[(0,o.jsx)(tS,{}),(0,o.jsx)(td,{ref:i,className:(0,$.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:t})]}));tN.displayName=td.displayName;let tC=({className:e,...t})=>(0,o.jsx)("div",{className:(0,$.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});tC.displayName="DialogHeader";let tA=({className:e,...t})=>(0,o.jsx)("div",{className:(0,$.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});tA.displayName="DialogFooter";let tT=i.forwardRef(({className:e,...t},a)=>(0,o.jsx)(tf,{ref:a,className:(0,$.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));tT.displayName=tf.displayName;let tH=i.forwardRef(({className:e,...t},a)=>(0,o.jsx)(tb,{ref:a,className:(0,$.cn)("text-sm text-muted-foreground",e),...t}));tH.displayName=tb.displayName;var tM=a(6317);function tI({duration:e,onTimeEnd:t,isActive:a=!0}){let[n,s]=(0,i.useState)(60*e),[r,l]=(0,i.useState)(100),c=Math.floor(n/60);return(0,o.jsx)(Z.Zp,{className:"w-full",children:(0,o.jsx)(Z.Wu,{className:"p-4",children:(0,o.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsx)("span",{className:"text-sm font-medium",children:"Thời gian c\xf2n lại"}),(0,o.jsxs)("span",{className:`text-lg font-bold ${r>50?"text-green-600":r>20?"text-yellow-600":"text-red-600"}`,children:[c.toString().padStart(2,"0"),":",(n%60).toString().padStart(2,"0")]})]}),(0,o.jsx)(tM.k,{value:r})]})})})}function tP(){let[e,t]=(0,i.useState)("chat"),[a,n]=(0,i.useState)([]),[s,r]=(0,i.useState)(null),[l,c]=(0,i.useState)(!1),[u,h]=(0,i.useState)(!1),[d,p]=(0,i.useState)(null),[m,g]=(0,i.useState)(!1),[y,f]=(0,i.useState)(15),[v,b]=(0,i.useState)(!1),[w,x]=(0,i.useState)(null),{toast:_}=(0,eJ.dj)(),W="test-user",k=async e=>{if(e.trim()&&s)try{c(!0);let t={role:"user",content:e,sessionId:s.id,timestamp:Date.now()};n(e=>[...Array.isArray(e)?[...e]:[],t]);let a=await el.sendMessage(e),o={role:"assistant",content:a,sessionId:s.id,timestamp:Date.now()};n(e=>[...Array.isArray(e)?[...e]:[],o])}catch(e){console.error("Error sending message:",e),_({title:"Error",description:"Failed to send message. Please try again.",variant:"destructive"})}finally{c(!1)}},j=async e=>{try{let t={role:"user",content:"[Audio Response]"};n(e=>[...e,t]);let a={role:"assistant",content:e};n(e=>[...e,a]);try{let t=e.match(/\{[\s\S]*?\}/);if(t){let e=JSON.parse(t[0]);s&&el.updateSessionMetrics(s.id,e)}}catch(e){console.error("Error parsing metrics:",e)}}catch(e){_({title:"Lỗi",description:"Kh\xf4ng thể ph\xe2n t\xedch audio. Vui l\xf2ng thử lại sau.",variant:"destructive"})}},D=()=>{p(null),n([]),t("templates"),g(!0)},S=async e=>{p(e),r(el.startSession(W,e.id)),e.taskType.replace("speaking_part",""),e.level,e.targetBand,e.criteria.join(", ");let a=`Let's start a speaking practice session for IELTS Part ${e.taskType.replace("speaking_part","")}. 
    
    ${e.titleVi}
    ${e.descriptionVi}
    
    I'll be your IELTS speaking tutor for this session. We'll focus on: ${e.criteria.join(", ")}
    
    Are you ready to begin?`;await k(a),t("chat")},N=async()=>{if(y<5||y>30){_({title:"Lỗi",description:"Thời gian luyện tập phải từ 5-30 ph\xfat",variant:"destructive"});return}g(!1),b(!0);try{let e=el.startSession(W,y);r(e),n(e.messages)}catch(e){_({title:"Lỗi",description:"Kh\xf4ng thể bắt đầu phi\xean luyện tập. Vui l\xf2ng thử lại sau.",variant:"destructive"})}};return(0,o.jsxs)("div",{className:"container mx-auto p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[(0,o.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,o.jsx)("div",{className:"col-span-3",children:(0,o.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-[inset_-12px_-8px_40px_#46464620] hover:shadow-[inset_-12px_-8px_40px_#46464620,_12px_8px_20px_#46464620] transition-all duration-300",children:(0,o.jsx)(eN,{onNewSession:D,onSessionSelect:e=>{r(e),e.messages&&n(e.messages)},currentSession:s})})}),(0,o.jsx)("div",{className:"col-span-9",children:d?(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-[inset_-12px_-8px_40px_#46464620]",children:[(0,o.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-2xl font-bold mb-2",children:d.titleVi}),(0,o.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:d.descriptionVi})]}),(0,o.jsx)(K.$,{variant:"outline",onClick:D,className:"rounded-xl bg-white hover:bg-gray-50 shadow-[5px_5px_10px_#b8b9be,_-5px_-5px_10px_#ffffff] hover:shadow-[inset_5px_5px_10px_#b8b9be,_inset_-5px_-5px_10px_#ffffff] transition-all duration-300",children:"New Session"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[(0,o.jsxs)("div",{className:"p-4 rounded-xl bg-gray-50 dark:bg-gray-700 shadow-[inset_5px_5px_10px_#b8b9be,_inset_-5px_-5px_10px_#ffffff]",children:[(0,o.jsx)("p",{className:"text-sm font-medium",children:"Level"}),(0,o.jsx)("p",{className:"text-lg",children:d.level})]}),(0,o.jsxs)("div",{className:"p-4 rounded-xl bg-gray-50 dark:bg-gray-700 shadow-[inset_5px_5px_10px_#b8b9be,_inset_-5px_-5px_10px_#ffffff]",children:[(0,o.jsx)("p",{className:"text-sm font-medium",children:"Target Band"}),(0,o.jsx)("p",{className:"text-lg",children:d.targetBand})]}),(0,o.jsxs)("div",{className:"p-4 rounded-xl bg-gray-50 dark:bg-gray-700 shadow-[inset_5px_5px_10px_#b8b9be,_inset_-5px_-5px_10px_#ffffff]",children:[(0,o.jsx)("p",{className:"text-sm font-medium",children:"Part"}),(0,o.jsx)("p",{className:"text-lg",children:"free_chat"===d.taskType?"Free Chat":d.taskType.replace("speaking_","").toUpperCase()})]})]})]}),(0,o.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-[inset_-12px_-8px_40px_#46464620]",children:[v&&(0,o.jsx)("div",{className:"mb-4",children:(0,o.jsx)(tI,{duration:y,onTimeEnd:e=>{b(!1),x(e)},isActive:v})}),(0,o.jsx)(eI,{messages:a,onSendMessage:k,isProcessing:l}),(0,o.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:(0,o.jsx)(eY,{onAnalysisComplete:j,isHandsFree:u})})]})]}):(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"text-center space-y-2 mb-8",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold",children:"IELTS Speaking Practice"}),(0,o.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Choose a template or start a free chat with AI tutor"})]}),(0,o.jsx)("div",{className:"mb-8",children:(0,o.jsxs)(Z.Zp,{className:"cursor-pointer hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1 bg-white dark:bg-gray-800 shadow-[5px_5px_10px_#b8b9be,_-5px_-5px_10px_#ffffff] hover:shadow-[8px_8px_15px_#b8b9be,_-8px_-8px_15px_#ffffff]",onClick:()=>S(ec.find(e=>"free_chat"===e.taskType)),children:[(0,o.jsxs)(Z.aR,{children:[(0,o.jsx)(Z.ZB,{children:"Tr\xf2 chuyện tự do"}),(0,o.jsx)(Z.BT,{children:"Tr\xf2 chuyện tự do với AI tutor để luyện tập tiếng Anh"})]}),(0,o.jsx)(Z.Wu,{children:(0,o.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,o.jsx)("span",{children:"Level: All Levels"}),(0,o.jsx)("span",{children:"Free Practice"})]})})]})}),(0,o.jsxs)(E,{defaultValue:"part1",className:"w-full",children:[(0,o.jsxs)(V,{className:"grid w-full grid-cols-4 mb-8 p-1 bg-white dark:bg-gray-800 rounded-xl shadow-[5px_5px_10px_#b8b9be,_-5px_-5px_10px_#ffffff]",children:[(0,o.jsx)(Q,{value:"part1",className:"data-[state=active]:shadow-[inset_5px_5px_10px_#b8b9be,_inset_-5px_-5px_10px_#ffffff] rounded-lg",children:"Part 1"}),(0,o.jsx)(Q,{value:"part2",className:"data-[state=active]:shadow-[inset_5px_5px_10px_#b8b9be,_inset_-5px_-5px_10px_#ffffff] rounded-lg",children:"Part 2"}),(0,o.jsx)(Q,{value:"part3",className:"data-[state=active]:shadow-[inset_5px_5px_10px_#b8b9be,_inset_-5px_-5px_10px_#ffffff] rounded-lg",children:"Part 3"}),(0,o.jsx)(Q,{value:"advanced",className:"data-[state=active]:shadow-[inset_5px_5px_10px_#b8b9be,_inset_-5px_-5px_10px_#ffffff] rounded-lg",children:"Advanced"})]}),["part1","part2","part3","advanced"].map(e=>(0,o.jsx)(X,{value:e,children:(0,o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ec.filter(t=>t.taskType===`speaking_${e}`).map(e=>(0,o.jsxs)(Z.Zp,{className:"cursor-pointer transition-all duration-300 transform hover:-translate-y-1 bg-white dark:bg-gray-800 shadow-[5px_5px_10px_#b8b9be,_-5px_-5px_10px_#ffffff] hover:shadow-[8px_8px_15px_#b8b9be,_-8px_-8px_15px_#ffffff]",onClick:()=>S(e),children:[(0,o.jsxs)(Z.aR,{children:[(0,o.jsx)(Z.ZB,{children:e.titleVi}),(0,o.jsx)(Z.BT,{children:e.descriptionVi})]}),(0,o.jsxs)(Z.Wu,{children:[(0,o.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,o.jsxs)("span",{children:["Level: ",e.level]}),(0,o.jsxs)("span",{children:["Target: Band ",e.targetBand]})]}),(0,o.jsx)("div",{className:"mt-2 flex flex-wrap gap-1",children:e.criteria.map((e,t)=>(0,o.jsx)("span",{className:"text-xs px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-700 shadow-[inset_2px_2px_5px_#b8b9be,_inset_-2px_-2px_5px_#ffffff]",children:e},t))})]})]},e.id))})},e))]})]})})]}),(0,o.jsx)(ta,{open:m,onOpenChange:g,children:(0,o.jsxs)(tN,{children:[(0,o.jsxs)(tC,{children:[(0,o.jsx)(tT,{children:"Chọn thời gian luyện tập"}),(0,o.jsx)(tH,{children:"Bạn muốn d\xe0nh bao nhi\xeau ph\xfat cho phi\xean luyện tập n\xe0y? (5-30 ph\xfat)"})]}),(0,o.jsx)("div",{className:"grid gap-4 py-4",children:(0,o.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,o.jsx)(eZ.J,{htmlFor:"duration",className:"text-right",children:"Thời gian (ph\xfat)"}),(0,o.jsx)(eC.p,{id:"duration",type:"number",min:5,max:30,value:y,onChange:e=>f(parseInt(e.target.value)),className:"col-span-3"})]})}),(0,o.jsx)(tA,{children:(0,o.jsx)(K.$,{onClick:N,children:"Bắt đầu"})})]})})]})}},4590:(e,t,a)=>{"use strict";a.d(t,{BT:()=>c,Wu:()=>u,ZB:()=>l,Zp:()=>s,aR:()=>r});var o=a(5512),i=a(8009),n=a(4195);let s=i.forwardRef(({className:e,...t},a)=>(0,o.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));s.displayName="Card";let r=i.forwardRef(({className:e,...t},a)=>(0,o.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));r.displayName="CardHeader";let l=i.forwardRef(({className:e,...t},a)=>(0,o.jsx)("h3",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let c=i.forwardRef(({className:e,...t},a)=>(0,o.jsx)("p",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let u=i.forwardRef(({className:e,...t},a)=>(0,o.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",e),...t}));u.displayName="CardContent",i.forwardRef(({className:e,...t},a)=>(0,o.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},7722:(e,t,a)=>{"use strict";a.d(t,{p:()=>s});var o=a(5512),i=a(8009),n=a(4195);let s=i.forwardRef(({className:e,type:t,...a},i)=>(0,o.jsx)("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...a}));s.displayName="Input"},2628:(e,t,a)=>{"use strict";a.d(t,{J:()=>r});var o=a(5512),i=a(8009),n=a(2405),s=a(4195);let r=i.forwardRef(({className:e,...t},a)=>(0,o.jsx)(n.b,{ref:a,className:(0,s.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));r.displayName=n.b.displayName},6317:(e,t,a)=>{"use strict";a.d(t,{k:()=>r});var o=a(5512),i=a(8009),n=a(4131),s=a(4195);let r=i.forwardRef(({className:e,value:t,...a},i)=>(0,o.jsx)(n.bL,{ref:i,className:(0,s.cn)("relative h-2 w-full overflow-hidden rounded-full bg-slate-100",e),...a,children:(0,o.jsx)(n.C1,{className:"h-full w-full flex-1 bg-gradient-to-r from-blue-600 to-cyan-500 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));r.displayName="Progress"},7815:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});let o=(0,a(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"e:\\\\STAND ALONE APP\\\\src\\\\app\\\\agents\\\\speaking\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"e:\\STAND ALONE APP\\src\\app\\agents\\speaking\\page.tsx","default")}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),o=t.X(0,[989,364,258,649,614,848],()=>a(7460));module.exports=o})();