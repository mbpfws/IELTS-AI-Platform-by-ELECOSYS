(()=>{var e={};e.id=491,e.ids=[491],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},8065:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>x,routeModule:()=>d,serverHooks:()=>g,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>m});var o={};t.r(o),t.d(o,{POST:()=>p});var a=t(2706),s=t(8203),n=t(5994),i=t(9187);let u=new(t(6858)).ij("AIzaSyCl_92cZ5Q3S7zSWbcy-258HXPNzMFXauk");async function p(e){try{let r=await e.formData(),t=r.get("audio"),o=r.get("prompt");if(!t)return i.NextResponse.json({error:"No audio file provided"},{status:400});let a=u.getGenerativeModel({model:"learnlm-1.5-pro-experimental",generationConfig:{maxOutputTokens:4e3}}),s=await t.arrayBuffer(),n=Buffer.from(s).toString("base64"),p=await a.generateContent([{text:o||"This is my response:"},{inlineData:{mimeType:"audio/webm;codecs=opus",data:n}}]),d=(await p.response).text();return i.NextResponse.json({nextPrompt:d,metrics:{fluency:c(d,"fluency"),vocabulary:c(d,"vocabulary"),grammar:c(d,"grammar"),pronunciation:c(d,"pronunciation")}})}catch(e){return console.error("Error processing audio:",e),i.NextResponse.json({error:"Error processing audio"},{status:500})}}function c(e,r){return Math.floor(3*Math.random())+6}let d=new a.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/speaking/process-audio/route",pathname:"/api/speaking/process-audio",filename:"route",bundlePath:"app/api/speaking/process-audio/route"},resolvedPagePath:"e:\\STAND ALONE APP\\src\\app\\api\\speaking\\process-audio\\route.ts",nextConfigOutput:"standalone",userland:o}),{workAsyncStorage:l,workUnitAsyncStorage:m,serverHooks:g}=d;function x(){return(0,n.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:m})}},6487:()=>{},8335:()=>{}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[989,452,858],()=>t(8065));module.exports=o})();